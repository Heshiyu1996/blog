<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>其他 | Heshiyu&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/favicon.png">
    <link rel="manifest" href="/blog/favicon.png">
    <link rel="apple-touch-icon" href="/blog/favicon.png">
    <link rel="mask-icon" href="/blog/favicon.png" color="#3eaf7c">
    <meta name="description" content=" ">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="expires" cotent="0">
    <meta http-quiv="pragma" cotent="no-cache, must-revalidate">
    <meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f3b305dc.css" as="style"><link rel="preload" href="/blog/assets/js/app.8dd0e736.js" as="script"><link rel="preload" href="/blog/assets/js/2.9a5e99eb.js" as="script"><link rel="preload" href="/blog/assets/js/18.94239f10.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.339f5947.js"><link rel="prefetch" href="/blog/assets/js/100.ab80963b.js"><link rel="prefetch" href="/blog/assets/js/101.2c14c6c4.js"><link rel="prefetch" href="/blog/assets/js/102.f83fbc46.js"><link rel="prefetch" href="/blog/assets/js/103.e27cb048.js"><link rel="prefetch" href="/blog/assets/js/104.2b8c5486.js"><link rel="prefetch" href="/blog/assets/js/105.c9fda933.js"><link rel="prefetch" href="/blog/assets/js/106.fb3cb2d4.js"><link rel="prefetch" href="/blog/assets/js/107.b17fd0ba.js"><link rel="prefetch" href="/blog/assets/js/108.8f53ca17.js"><link rel="prefetch" href="/blog/assets/js/109.275ba654.js"><link rel="prefetch" href="/blog/assets/js/11.274eb2f7.js"><link rel="prefetch" href="/blog/assets/js/110.ce307871.js"><link rel="prefetch" href="/blog/assets/js/111.7b8d0571.js"><link rel="prefetch" href="/blog/assets/js/112.b8b8c51c.js"><link rel="prefetch" href="/blog/assets/js/113.97db34eb.js"><link rel="prefetch" href="/blog/assets/js/114.fbe93be3.js"><link rel="prefetch" href="/blog/assets/js/115.6e5b55e7.js"><link rel="prefetch" href="/blog/assets/js/116.3d50d67b.js"><link rel="prefetch" href="/blog/assets/js/117.eee13489.js"><link rel="prefetch" href="/blog/assets/js/118.3cc8bf38.js"><link rel="prefetch" href="/blog/assets/js/119.05400da7.js"><link rel="prefetch" href="/blog/assets/js/12.bd658b98.js"><link rel="prefetch" href="/blog/assets/js/120.262ee91d.js"><link rel="prefetch" href="/blog/assets/js/121.44bbcc4f.js"><link rel="prefetch" href="/blog/assets/js/122.4d6fc54f.js"><link rel="prefetch" href="/blog/assets/js/123.d8589aa3.js"><link rel="prefetch" href="/blog/assets/js/124.e313b961.js"><link rel="prefetch" href="/blog/assets/js/125.ddfb97bd.js"><link rel="prefetch" href="/blog/assets/js/126.6fabe88b.js"><link rel="prefetch" href="/blog/assets/js/127.b28c5e68.js"><link rel="prefetch" href="/blog/assets/js/128.1febc323.js"><link rel="prefetch" href="/blog/assets/js/129.988e6ea3.js"><link rel="prefetch" href="/blog/assets/js/13.b8bffb2a.js"><link rel="prefetch" href="/blog/assets/js/130.88bd33fe.js"><link rel="prefetch" href="/blog/assets/js/131.989811e8.js"><link rel="prefetch" href="/blog/assets/js/132.5c5a4ddd.js"><link rel="prefetch" href="/blog/assets/js/133.1283a790.js"><link rel="prefetch" href="/blog/assets/js/134.abc803fe.js"><link rel="prefetch" href="/blog/assets/js/135.4f4c22ba.js"><link rel="prefetch" href="/blog/assets/js/136.1df96aea.js"><link rel="prefetch" href="/blog/assets/js/137.98c14067.js"><link rel="prefetch" href="/blog/assets/js/138.cf870798.js"><link rel="prefetch" href="/blog/assets/js/139.3d16446f.js"><link rel="prefetch" href="/blog/assets/js/14.ced142d6.js"><link rel="prefetch" href="/blog/assets/js/140.3ce24601.js"><link rel="prefetch" href="/blog/assets/js/141.b80df3e9.js"><link rel="prefetch" href="/blog/assets/js/142.4c600adb.js"><link rel="prefetch" href="/blog/assets/js/143.3dc4d279.js"><link rel="prefetch" href="/blog/assets/js/144.e6ed4908.js"><link rel="prefetch" href="/blog/assets/js/145.d7e1baa4.js"><link rel="prefetch" href="/blog/assets/js/146.61ca3273.js"><link rel="prefetch" href="/blog/assets/js/147.7c0f1ea7.js"><link rel="prefetch" href="/blog/assets/js/148.6ef82b94.js"><link rel="prefetch" href="/blog/assets/js/149.f9ea9fd0.js"><link rel="prefetch" href="/blog/assets/js/15.5444b5bc.js"><link rel="prefetch" href="/blog/assets/js/150.0718d308.js"><link rel="prefetch" href="/blog/assets/js/151.d6aac3d8.js"><link rel="prefetch" href="/blog/assets/js/152.5b4908ae.js"><link rel="prefetch" href="/blog/assets/js/153.ed46d47a.js"><link rel="prefetch" href="/blog/assets/js/154.6be3f87d.js"><link rel="prefetch" href="/blog/assets/js/155.702d9720.js"><link rel="prefetch" href="/blog/assets/js/156.c4ae2723.js"><link rel="prefetch" href="/blog/assets/js/157.74b8dac4.js"><link rel="prefetch" href="/blog/assets/js/158.b2144d1f.js"><link rel="prefetch" href="/blog/assets/js/159.c838c713.js"><link rel="prefetch" href="/blog/assets/js/16.f5b66b34.js"><link rel="prefetch" href="/blog/assets/js/160.b99aa9fc.js"><link rel="prefetch" href="/blog/assets/js/161.36d8a004.js"><link rel="prefetch" href="/blog/assets/js/162.47c4457d.js"><link rel="prefetch" href="/blog/assets/js/163.18f22113.js"><link rel="prefetch" href="/blog/assets/js/164.fe7f7eb9.js"><link rel="prefetch" href="/blog/assets/js/165.205aebe8.js"><link rel="prefetch" href="/blog/assets/js/166.05eafb1d.js"><link rel="prefetch" href="/blog/assets/js/167.163de762.js"><link rel="prefetch" href="/blog/assets/js/168.2b89b0cf.js"><link rel="prefetch" href="/blog/assets/js/169.58907f68.js"><link rel="prefetch" href="/blog/assets/js/17.2b14844a.js"><link rel="prefetch" href="/blog/assets/js/170.5d3a3997.js"><link rel="prefetch" href="/blog/assets/js/171.0a6630d2.js"><link rel="prefetch" href="/blog/assets/js/172.98e68d95.js"><link rel="prefetch" href="/blog/assets/js/173.9a02fd8c.js"><link rel="prefetch" href="/blog/assets/js/174.234c39e2.js"><link rel="prefetch" href="/blog/assets/js/175.3dc6e7ca.js"><link rel="prefetch" href="/blog/assets/js/176.20248e35.js"><link rel="prefetch" href="/blog/assets/js/177.71637b0f.js"><link rel="prefetch" href="/blog/assets/js/178.2accbd24.js"><link rel="prefetch" href="/blog/assets/js/179.1a725bdb.js"><link rel="prefetch" href="/blog/assets/js/180.d61d837e.js"><link rel="prefetch" href="/blog/assets/js/181.e980e97f.js"><link rel="prefetch" href="/blog/assets/js/182.aa2d5ae7.js"><link rel="prefetch" href="/blog/assets/js/183.bf6aaf89.js"><link rel="prefetch" href="/blog/assets/js/184.5044f410.js"><link rel="prefetch" href="/blog/assets/js/185.b0a35a79.js"><link rel="prefetch" href="/blog/assets/js/186.4ab4ed2c.js"><link rel="prefetch" href="/blog/assets/js/187.1d25f34a.js"><link rel="prefetch" href="/blog/assets/js/188.850a0620.js"><link rel="prefetch" href="/blog/assets/js/189.5d98dbdc.js"><link rel="prefetch" href="/blog/assets/js/19.22354c72.js"><link rel="prefetch" href="/blog/assets/js/190.6df9ffe9.js"><link rel="prefetch" href="/blog/assets/js/191.ff626e97.js"><link rel="prefetch" href="/blog/assets/js/192.4d0be1bf.js"><link rel="prefetch" href="/blog/assets/js/193.64349f63.js"><link rel="prefetch" href="/blog/assets/js/194.e0616164.js"><link rel="prefetch" href="/blog/assets/js/20.338232eb.js"><link rel="prefetch" href="/blog/assets/js/21.ccb15356.js"><link rel="prefetch" href="/blog/assets/js/22.743e2c34.js"><link rel="prefetch" href="/blog/assets/js/23.cdd9345b.js"><link rel="prefetch" href="/blog/assets/js/24.45ba1767.js"><link rel="prefetch" href="/blog/assets/js/25.7efb1c0e.js"><link rel="prefetch" href="/blog/assets/js/26.ab221922.js"><link rel="prefetch" href="/blog/assets/js/27.f3eb7ffb.js"><link rel="prefetch" href="/blog/assets/js/28.3bb28a32.js"><link rel="prefetch" href="/blog/assets/js/29.2d3a6b69.js"><link rel="prefetch" href="/blog/assets/js/3.6e8f4466.js"><link rel="prefetch" href="/blog/assets/js/30.d178241d.js"><link rel="prefetch" href="/blog/assets/js/31.17ad23f1.js"><link rel="prefetch" href="/blog/assets/js/32.a97da663.js"><link rel="prefetch" href="/blog/assets/js/33.f3c98b68.js"><link rel="prefetch" href="/blog/assets/js/34.8c60c5ee.js"><link rel="prefetch" href="/blog/assets/js/35.d03aff4a.js"><link rel="prefetch" href="/blog/assets/js/36.bfb69e94.js"><link rel="prefetch" href="/blog/assets/js/37.177e001a.js"><link rel="prefetch" href="/blog/assets/js/38.53e01a4c.js"><link rel="prefetch" href="/blog/assets/js/39.141b89ce.js"><link rel="prefetch" href="/blog/assets/js/4.edf6b75e.js"><link rel="prefetch" href="/blog/assets/js/40.15b63871.js"><link rel="prefetch" href="/blog/assets/js/41.873ab8f2.js"><link rel="prefetch" href="/blog/assets/js/42.b523cb93.js"><link rel="prefetch" href="/blog/assets/js/43.0236b284.js"><link rel="prefetch" href="/blog/assets/js/44.11183afb.js"><link rel="prefetch" href="/blog/assets/js/45.92361b8b.js"><link rel="prefetch" href="/blog/assets/js/46.41d6cb4e.js"><link rel="prefetch" href="/blog/assets/js/47.69f6c6d1.js"><link rel="prefetch" href="/blog/assets/js/48.478d846b.js"><link rel="prefetch" href="/blog/assets/js/49.6d1d0e00.js"><link rel="prefetch" href="/blog/assets/js/5.7a340c95.js"><link rel="prefetch" href="/blog/assets/js/50.52f819f6.js"><link rel="prefetch" href="/blog/assets/js/51.51420c48.js"><link rel="prefetch" href="/blog/assets/js/52.aac4d19a.js"><link rel="prefetch" href="/blog/assets/js/53.f6d41362.js"><link rel="prefetch" href="/blog/assets/js/54.ff44409b.js"><link rel="prefetch" href="/blog/assets/js/55.7c5371f0.js"><link rel="prefetch" href="/blog/assets/js/56.0ad04af7.js"><link rel="prefetch" href="/blog/assets/js/57.3d0624c3.js"><link rel="prefetch" href="/blog/assets/js/58.11c5fdc5.js"><link rel="prefetch" href="/blog/assets/js/59.74acf14e.js"><link rel="prefetch" href="/blog/assets/js/6.29edfd14.js"><link rel="prefetch" href="/blog/assets/js/60.be638a04.js"><link rel="prefetch" href="/blog/assets/js/61.6b37fbf5.js"><link rel="prefetch" href="/blog/assets/js/62.c4577adc.js"><link rel="prefetch" href="/blog/assets/js/63.effe95fe.js"><link rel="prefetch" href="/blog/assets/js/64.82ac56ac.js"><link rel="prefetch" href="/blog/assets/js/65.f0165026.js"><link rel="prefetch" href="/blog/assets/js/66.ab6ae7a1.js"><link rel="prefetch" href="/blog/assets/js/67.6e76ed69.js"><link rel="prefetch" href="/blog/assets/js/68.2fa544fe.js"><link rel="prefetch" href="/blog/assets/js/69.36b1de75.js"><link rel="prefetch" href="/blog/assets/js/7.8119d2aa.js"><link rel="prefetch" href="/blog/assets/js/70.1cce33e7.js"><link rel="prefetch" href="/blog/assets/js/71.820308b8.js"><link rel="prefetch" href="/blog/assets/js/72.d3ef2f97.js"><link rel="prefetch" href="/blog/assets/js/73.c81396ed.js"><link rel="prefetch" href="/blog/assets/js/74.e22dcbcb.js"><link rel="prefetch" href="/blog/assets/js/75.3898d7da.js"><link rel="prefetch" href="/blog/assets/js/76.be3d80a8.js"><link rel="prefetch" href="/blog/assets/js/77.098a974d.js"><link rel="prefetch" href="/blog/assets/js/78.2abe05e1.js"><link rel="prefetch" href="/blog/assets/js/79.bdcd471c.js"><link rel="prefetch" href="/blog/assets/js/8.297ec135.js"><link rel="prefetch" href="/blog/assets/js/80.5d37d2a0.js"><link rel="prefetch" href="/blog/assets/js/81.c4ecb646.js"><link rel="prefetch" href="/blog/assets/js/82.19540c6e.js"><link rel="prefetch" href="/blog/assets/js/83.f478a428.js"><link rel="prefetch" href="/blog/assets/js/84.0a5f4434.js"><link rel="prefetch" href="/blog/assets/js/85.4bfcbc62.js"><link rel="prefetch" href="/blog/assets/js/86.2090dc6f.js"><link rel="prefetch" href="/blog/assets/js/87.36fdfd7e.js"><link rel="prefetch" href="/blog/assets/js/88.e62aaf12.js"><link rel="prefetch" href="/blog/assets/js/89.d89f4a5b.js"><link rel="prefetch" href="/blog/assets/js/9.0def6cd3.js"><link rel="prefetch" href="/blog/assets/js/90.1b11884e.js"><link rel="prefetch" href="/blog/assets/js/91.8829546d.js"><link rel="prefetch" href="/blog/assets/js/92.b43a0157.js"><link rel="prefetch" href="/blog/assets/js/93.02c47c55.js"><link rel="prefetch" href="/blog/assets/js/94.0984de88.js"><link rel="prefetch" href="/blog/assets/js/95.283525db.js"><link rel="prefetch" href="/blog/assets/js/96.f2666003.js"><link rel="prefetch" href="/blog/assets/js/97.174bd0df.js"><link rel="prefetch" href="/blog/assets/js/98.4f63bcf9.js"><link rel="prefetch" href="/blog/assets/js/99.caef36ff.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f3b305dc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Heshiyu's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/overview/" class="nav-link">
  总览
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/blog/skill/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/web/" class="nav-link">
  Web
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/react/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/skill/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/skill/nodejs/" class="nav-link">
  NodeJS
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/computeracy/" class="nav-link">
  计算机
</a></li><li class="dropdown-subitem"><a href="/blog/skill/algorithm/" class="nav-link">
  算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><span class="title">实践</span> <span class="arrow down"></span></button> <button type="button" aria-label="实践" class="mobile-dropdown-title"><span class="title">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          平台
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/practice/h5/" class="nav-link">
  H5
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/pc/" class="nav-link">
  PC
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/rn/" class="nav-link">
  RN
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/other/" class="nav-link">
  其它
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/tool/" class="nav-link">
  工程工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="周边" class="dropdown-title"><span class="title">周边</span> <span class="arrow down"></span></button> <button type="button" aria-label="周边" class="mobile-dropdown-title"><span class="title">周边</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          产出
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/output/standard/js/" class="nav-link">
  前端规范
</a></li><li class="dropdown-subitem"><a href="/blog/other/output/fruit/template/" class="nav-link">
  前端工程模板（React）
</a></li></ul></li><li class="dropdown-item"><h4>
          心得
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/feeling/" class="nav-link">
  读书/参会心得
</a></li><li class="dropdown-subitem"><a href="/blog/other/review/" class="nav-link">
  梳理
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">
  工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/overview/" class="nav-link">
  总览
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/blog/skill/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/js/" class="nav-link router-link-active">
  JS
</a></li><li class="dropdown-subitem"><a href="/blog/skill/web/" class="nav-link">
  Web
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/react/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/blog/skill/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/blog/skill/nodejs/" class="nav-link">
  NodeJS
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/skill/computeracy/" class="nav-link">
  计算机
</a></li><li class="dropdown-subitem"><a href="/blog/skill/algorithm/" class="nav-link">
  算法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><span class="title">实践</span> <span class="arrow down"></span></button> <button type="button" aria-label="实践" class="mobile-dropdown-title"><span class="title">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          平台
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/practice/h5/" class="nav-link">
  H5
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/pc/" class="nav-link">
  PC
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/rn/" class="nav-link">
  RN
</a></li><li class="dropdown-subitem"><a href="/blog/business/practice/other/" class="nav-link">
  其它
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/business/tool/" class="nav-link">
  工程工具
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="周边" class="dropdown-title"><span class="title">周边</span> <span class="arrow down"></span></button> <button type="button" aria-label="周边" class="mobile-dropdown-title"><span class="title">周边</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          产出
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/output/standard/js/" class="nav-link">
  前端规范
</a></li><li class="dropdown-subitem"><a href="/blog/other/output/fruit/template/" class="nav-link">
  前端工程模板（React）
</a></li></ul></li><li class="dropdown-item"><h4>
          心得
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/feeling/" class="nav-link">
  读书/参会心得
</a></li><li class="dropdown-subitem"><a href="/blog/other/review/" class="nav-link">
  梳理
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/tool/" class="nav-link">
  工具
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>《JS》</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skill/js/async-plan/" class="sidebar-link">JS异步解决方案</a></li><li><a href="/blog/skill/js/design-patterns/" class="sidebar-link">JS设计模式</a></li><li><a href="/blog/skill/js/sort/" class="sidebar-link">Array.prototype.sort</a></li><li><a href="/blog/skill/js/dom/" class="sidebar-link">常用的DOM操作方法</a></li><li><a href="/blog/skill/js/event-loop/" class="sidebar-link">事件循环（EventLoop）</a></li><li><a href="/blog/skill/js/modular/" class="sidebar-link">CommonJS、ES6模块规范</a></li><li><a href="/blog/skill/js/regex/" class="sidebar-link">JS正则表达式</a></li><li><a href="/blog/skill/js/class/" class="sidebar-link">Class（类）</a></li><li><a href="/blog/skill/js/typescript/" class="sidebar-link">Typescript</a></li><li><a href="/blog/skill/js/other/" aria-current="page" class="active sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#js数据类型" class="sidebar-link">JS数据类型</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#可变-mutable-和不可变-immutable-对象的区别" class="sidebar-link">可变（Mutable）和不可变（Immutable）对象的区别</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#事件委托" class="sidebar-link">事件委托</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#回调地狱" class="sidebar-link">回调地狱</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#原型、构造函数、对象和原型链" class="sidebar-link">原型、构造函数、对象和原型链</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#函数防抖、函数节流" class="sidebar-link">函数防抖、函数节流</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#call、apply、bind" class="sidebar-link">call、apply、bind</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#new操作符的原理" class="sidebar-link">new操作符的原理</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#window对象和document对象的区别" class="sidebar-link">window对象和document对象的区别</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#var、let、const" class="sidebar-link">var、let、const</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#es5、es6、es7的区别" class="sidebar-link">ES5、ES6、ES7的区别</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#js数组的方法" class="sidebar-link">js数组的方法</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#数组去重" class="sidebar-link">数组去重</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#for-in、object-keys、for-of" class="sidebar-link">for...in、Object.keys、for...of</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#math-floor、parseint" class="sidebar-link">Math.floor、parseInt</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#this的指向" class="sidebar-link">this的指向</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#this绑定规则的优先级" class="sidebar-link">this绑定规则的优先级</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#ajax" class="sidebar-link">Ajax</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#dom绑定事件的三种方式" class="sidebar-link">DOM绑定事件的三种方式</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#三种事件流模型" class="sidebar-link">三种事件流模型</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#target、currenttarget" class="sidebar-link">target、currentTarget</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#script标签的加载规则" class="sidebar-link">script标签的加载规则</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#扩展运算符-、object-assign" class="sidebar-link">扩展运算符（...）、Object.assign()</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#深拷贝" class="sidebar-link">深拷贝</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#暂时性死区-tdz" class="sidebar-link">暂时性死区（TDZ）</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#reduce" class="sidebar-link">reduce()</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#函数的内部属性" class="sidebar-link">函数的内部属性</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#事件处理函数和默认行为的执行顺序" class="sidebar-link">事件处理函数和默认行为的执行顺序</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#计算随机数0-5、95-99" class="sidebar-link">计算随机数0-5、95-99</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#柯里化" class="sidebar-link">柯里化</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#es6新数据结构set、map" class="sidebar-link">ES6新数据结构Set、Map</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#和-的区别" class="sidebar-link">==和===的区别</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#js的继承" class="sidebar-link">JS的继承</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#js垃圾回收机制" class="sidebar-link">JS垃圾回收机制</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#tostring-、valueof" class="sidebar-link">toString()、valueOf()</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#类数组对象、可遍历对象" class="sidebar-link">类数组对象、可遍历对象</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#find-、-findindex-和-filter" class="sidebar-link">[ ].find()、[ ].findIndex()和[ ].filter()</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#判断对象是否为空对象" class="sidebar-link">判断对象是否为空对象{}</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#object-defineproperty" class="sidebar-link">Object.defineProperty</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#with函数" class="sidebar-link">with函数</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#scroll事件不能阻止冒泡" class="sidebar-link">scroll事件不能阻止冒泡</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#向下、向上取整" class="sidebar-link">向下、向上取整</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#尾递归" class="sidebar-link">尾递归</a></li><li class="sidebar-sub-header"><a href="/blog/skill/js/other/#stoppropagation" class="sidebar-link">stopPropagation</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h1> <blockquote><p>这里会搜集一些有关JS的零碎知识</p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#其他">其他</a><ul><li><a href="#js数据类型">JS数据类型</a></li><li><a href="#可变-mutable-和不可变-immutable-对象的区别">可变（Mutable）和不可变（Immutable）对象的区别</a></li><li><a href="#闭包">闭包</a></li><li><a href="#事件委托">事件委托</a></li><li><a href="#回调地狱">回调地狱</a></li><li><a href="#原型、构造函数、对象和原型链">原型、构造函数、对象和原型链</a></li><li><a href="#函数防抖、函数节流">函数防抖、函数节流</a></li><li><a href="#call、apply、bind">call、apply、bind</a></li><li><a href="#new操作符的原理">new操作符的原理</a></li><li><a href="#window对象和document对象的区别">window对象和document对象的区别</a></li><li><a href="#var、let、const">var、let、const</a></li><li><a href="#es5、es6、es7的区别">ES5、ES6、ES7的区别</a></li><li><a href="#js数组的方法">js数组的方法</a></li><li><a href="#数组去重">数组去重</a></li><li><a href="#for-in、object-keys、for-of">for...in、Object.keys、for...of</a></li><li><a href="#math-floor、parseint">Math.floor、parseInt</a></li><li><a href="#this的指向">this的指向</a></li><li><a href="#this绑定规则的优先级">this绑定规则的优先级</a></li><li><a href="#ajax">Ajax</a></li><li><a href="#dom绑定事件的三种方式">DOM绑定事件的三种方式</a></li><li><a href="#三种事件流模型">三种事件流模型</a></li><li><a href="#target、currenttarget">target、currentTarget</a></li><li><a href="#script标签的加载规则">script标签的加载规则</a></li><li><a href="#扩展运算符-、object-assign">扩展运算符（...）、Object.assign()</a></li><li><a href="#深拷贝">深拷贝</a></li><li><a href="#暂时性死区-tdz">暂时性死区（TDZ）</a></li><li><a href="#reduce">reduce()</a></li><li><a href="#函数的内部属性">函数的内部属性</a></li><li><a href="#事件处理函数和默认行为的执行顺序">事件处理函数和默认行为的执行顺序</a></li><li><a href="#计算随机数0-5、95-99">计算随机数0-5、95-99</a></li><li><a href="#柯里化">柯里化</a></li><li><a href="#es6新数据结构set、map">ES6新数据结构Set、Map</a></li><li><a href="#和-的区别">==和===的区别</a></li><li><a href="#js的继承">JS的继承</a></li><li><a href="#js垃圾回收机制">JS垃圾回收机制</a></li><li><a href="#tostring-、valueof">toString()、valueOf()</a></li><li><a href="#类数组对象、可遍历对象">类数组对象、可遍历对象</a></li><li><a href="#find-、-findindex-和-filter">[ ].find()、[ ].findIndex()和[ ].filter()</a></li><li><a href="#判断对象是否为空对象">判断对象是否为空对象{}</a></li><li><a href="#object-defineproperty">Object.defineProperty</a></li><li><a href="#with函数">with函数</a></li><li><a href="#scroll事件不能阻止冒泡">scroll事件不能阻止冒泡</a></li><li><a href="#向下、向上取整">向下、向上取整</a></li><li><a href="#尾递归">尾递归</a></li><li><a href="#stoppropagation">stopPropagation</a></li></ul></li></ul></div><p></p> <h2 id="js数据类型"><a href="#js数据类型" class="header-anchor">#</a> JS数据类型</h2> <p>基本数据类型：string、number、boolean、undefined、null、Symbol</p> <p>引用数据类型：object</p> <h3 id="null和undefined的区别"><a href="#null和undefined的区别" class="header-anchor">#</a> null和undefined的区别</h3> <p>null表示“没有对象”，不应该有值；</p> <p>undefined表示“缺少值”，应该有值，但未赋值。</p> <h2 id="可变-mutable-和不可变-immutable-对象的区别"><a href="#可变-mutable-和不可变-immutable-对象的区别" class="header-anchor">#</a> 可变（Mutable）和不可变（Immutable）对象的区别</h2> <h3 id="可变对象"><a href="#可变对象" class="header-anchor">#</a> 可变对象：</h3> <p>频繁地修改对象时，都是在原对象基础上修改，并不需要重新创建。（如：React中的ref）</p> <blockquote><p>这样就可以有效地利用内存，不会造成内存空间的浪费。</p></blockquote> <h3 id="不可变对象"><a href="#不可变对象" class="header-anchor">#</a> 不可变对象：</h3> <p>每次修改 不可变对象（immutable） 时的都会创建一个新的不可变对象。</p> <blockquote><p>在新对象上的操作不影响到原对象的数据。</p></blockquote> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <p><code>闭包</code>就是一个函数，只不过这个函数能够访问 <strong>其他函数的作用域</strong> 中的变量。</p> <p>原理：<strong>这个函数的作用域链，包含着另一个个函数的作用域</strong></p> <p>特点：</p> <ul><li>【读取别人】可以读取另外一个函数作用域里的变量（创建一些特权方法）</li> <li>【留在内存】可以将这些变量<strong>长时间保存在内存</strong>中，也可能造成内存泄露</li></ul> <h3 id="为什么闭包可以访问其他函数的作用域链"><a href="#为什么闭包可以访问其他函数的作用域链" class="header-anchor">#</a> 为什么闭包可以访问其他函数的作用域链？</h3> <p>当 <strong>调用一个函数</strong> 时，</p> <ul><li>调用该函数时，会将它的<strong>执行上下文</strong>（包括它的参数、变量、作用域链）以 <strong>栈帧</strong> 形式推入执行栈</li> <li>如果这个函数的作用域链还包含着另一个函数作用域，那<strong>它在执行上下文推出栈帧前</strong>，会一直保持这个引用而不被垃圾清除。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'heshiyu'</span>
    <span class="token keyword">var</span> <span class="token function-variable function">inner</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> inner <span class="token comment">// 注意这里只是返回对这个方法的引用</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> inner <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获得：闭包函数inner</span>
<span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'heshiyu'</span>

<span class="token comment">// 原理：这个函数的内部函数（inner）作用域链，包含着这个函数的作用域（变量a）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>当程序执行完<code>var inner = outer()</code>，其实<code>outer</code>的执行环境并没有销毁。因为它里面的<strong>变量a仍然被inner函数的作用域链所引用</strong>，当程序执行完<code>inner()</code>，<code>inner</code>和<code>outer</code>的执行环境才被销毁。</p> <h2 id="事件委托"><a href="#事件委托" class="header-anchor">#</a> 事件委托</h2> <p>事件委托（也称事件代理）：<strong>指定一个事件处理程序，来管理某一类型的所有事件</strong>。</p> <p>好处：</p> <ul><li>性能的角度，减少DOM的交互次数</li> <li>动态新增子元素时，无需额外绑定事件</li></ul> <p>坏处：</p> <ul><li>要对“不需要代理的节点”进行过滤</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
　　<span class="token keyword">var</span> oUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;ul1&quot;</span><span class="token punctuation">)</span>
　　oUl<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//兼容IE</span>
        <span class="token keyword">var</span> ev <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event
        <span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target <span class="token operator">||</span> ev<span class="token punctuation">.</span>srcElement
        <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
　　　　<span class="token punctuation">}</span>
　　<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="回调地狱"><a href="#回调地狱" class="header-anchor">#</a> 回调地狱</h2> <p><code>回调地狱</code>：</p> <ul><li>嵌套了很多层回调函数，使得代码<strong>不易阅读与维护</strong>。</li> <li>多个异步操作形成<strong>强耦合</strong> <ul><li>只要有一个操作需要修改，它的上层回调、下层回调就要跟着改</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">asyncFunc1</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">asyncFunc2</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">asyncFunc3</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args3</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">asyncFunc4</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args4</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// some operation</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>可以看到左侧明显出现了一个<strong>三角形缩进</strong>。</p> <p>（相关：<a href="/skill/js/async-plan">JS异步解决方案的发展历程</a>）</p> <h2 id="原型、构造函数、对象和原型链"><a href="#原型、构造函数、对象和原型链" class="header-anchor">#</a> 原型、构造函数、对象和原型链</h2> <ul><li><code>原型</code>（prototype）可以让我们预定义<code>某一种特定类型</code>（如Person类型）中、<strong>所有实例共享的属性</strong>和<strong>方法</strong>，然后它们会自动应用到新对象实例上。</li></ul> <blockquote><p>每个原型都有一个<code>.constructor</code>属性，它指向的是构造函数本身（constructor）</p></blockquote> <ul><li><code>构造函数</code>通过new操作符，可以创建该实例对象。</li></ul> <blockquote><p>每个构造函数都有一个<code>.prototype</code>属性，它指向的是该构造函数的原型（prototype）</p></blockquote> <ul><li><p><code>对象</code>是通过<code>构造函数</code>实例化new出来的，每个对象都有<code>__proto__</code>属性，指向它的原型（prototype）</p></li> <li><p><code>原型链</code>是作为 <strong>实现继承</strong> 的主要方法，它基本思想是：<code>利用原型，让一个引用类型继承另一个引用类型的属性和方法</code>。<strong>（实际上是<code>__proto__连起来的链条</code>）</strong></p></li></ul> <blockquote><p>当实例化一个对象的时候，我们不仅可以获得这个<code>对象的实例属性（和方法）</code>，还可以获得<code>原型对象上的原型属性（和方法）</code></p></blockquote> <p><img src="/blog/assets/img/Ptototype-1.9eab76a4.png" alt="alt"></p> <h3 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h3> <p>求：p 的原型链</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="函数防抖、函数节流"><a href="#函数防抖、函数节流" class="header-anchor">#</a> 函数防抖、函数节流</h2> <p><code>函数防抖</code>（debounce），指的是在上次触发之后、再过N毫秒，才能执行该动作</p> <p>举例：类似电梯关门原理。当还有人进来时，电梯门不会关上。只有当一段时间没人上了，电梯才会关门。</p> <p>简单实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> args <span class="token operator">=</span> arguments
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">func1</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> myFunc1 <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>func1<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">myFunc1</span><span class="token punctuation">(</span><span class="token string">'caozuoxiao'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>函数节流</code>（throttle）是指：<strong>在给定的时间窗口内，函数的调用不能超过 1 次。</strong></p> <p>简单实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> args <span class="token operator">=</span> arguments
        <span class="token keyword">let</span> currentTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>currentTime <span class="token operator">-</span> startTime <span class="token operator">&gt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
            startTime <span class="token operator">=</span> currentTime <span class="token comment">// 刷新旧的startTime</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> myFunc <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 为了test，delay设为-1</span>
<span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token string">'heshiyu'</span><span class="token punctuation">)</span> <span class="token comment">// 'hehsiyu'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="call、apply、bind"><a href="#call、apply、bind" class="header-anchor">#</a> call、apply、bind</h2> <p>3个方法的作用：</p> <ul><li>改变<code>this</code>的指向；</li> <li>支持<code>传入参数</code>；</li></ul> <p>特点：</p> <ul><li><code>call</code>：<strong>返回函数结果</strong>。只能一个参数一个参数传</li> <li><code>apply</code>：<strong>返回函数结果</strong>。只支持传一个数组（<code>arguments</code>）</li> <li><code>bind</code>：<strong>返回新函数</strong>。只能一个参数一个参数传</li></ul> <h3 id="用法"><a href="#用法" class="header-anchor">#</a> 用法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2020</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">arrowFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">1996</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 2020 1 2</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 1996 1 2</span>
<span class="token function">arrowFn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 2020 1 2 （箭头函数）</span>

<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 2020 1 2</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 1996 1 2</span>
<span class="token function">arrowFn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 2020 1 2（箭头函数）</span>

<span class="token keyword">let</span> newFunc1 <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">newFunc1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2020 1 2</span>
<span class="token keyword">let</span> newFunc2 <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">newFunc2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1996 1 2</span>
<span class="token keyword">let</span> newFunc3 <span class="token operator">=</span> <span class="token function">arrowFn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">newFunc3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2020 1 2（箭头函数）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><blockquote><p>注意： 箭头函数里的this，在定义时就会确定了（为外层的this）</p></blockquote> <h3 id="实现call"><a href="#实现call" class="header-anchor">#</a> 实现call</h3> <p>将<code>myCall</code>方法绑定在每个函数的原型（<code>prototype</code>）上</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result
    <span class="token comment">// 0、传参检测</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj <span class="token operator">=</span> window
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        obj <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 1、改变`this`指向</span>
    <span class="token comment">// 要让传入的obj成为：函数调用时的this值</span>
    <span class="token comment">// 这里的this指的是：调用myCall的函数（即下方示例的fn）</span>
    obj<span class="token punctuation">.</span>_fn_ <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token comment">// 2、支持`传入参数`</span>
    <span class="token comment">// 这样就可以看作是在obj对象下，执行的fn</span>
    result <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">_fn_</span><span class="token punctuation">(</span><span class="token operator">...</span>arg<span class="token punctuation">)</span>
    <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>_fn_
    <span class="token keyword">return</span> result <span class="token comment">// 3、利用变量保存函数的返回值</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>调用<code>myCall</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
   x<span class="token operator">:</span> <span class="token number">1996</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x
<span class="token punctuation">}</span>

fn<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 改变调用fn方法时的this指向为obj</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="实现apply"><a href="#实现apply" class="header-anchor">#</a> 实现apply</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意：apply的第二个参数是一个数组</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">...</span>arr<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="实现bind"><a href="#实现bind" class="header-anchor">#</a> 实现bind</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 可能调用新函数时还会传入参数（会接在原来的参数后面）</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> args <span class="token operator">=</span> arg<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arg2<span class="token punctuation">)</span>

        <span class="token comment">// 以下和实现call的一样</span>
        <span class="token keyword">let</span> result
        <span class="token comment">// 0、传参检测</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            obj <span class="token operator">=</span> window
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            obj <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
       <span class="token comment">// 1、改变`this`指向</span>
       <span class="token comment">// 要让传入的obj成为：函数调用时的this值</span>
        obj<span class="token punctuation">.</span>_fn_ <span class="token operator">=</span> <span class="token keyword">this</span>
        result <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">_fn_</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token comment">// 2、支持`传入参数`</span>
        <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>_fn_
        <span class="token keyword">return</span> result <span class="token comment">// 3、利用变量保存函数的返回值</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="new操作符的原理"><a href="#new操作符的原理" class="header-anchor">#</a> new操作符的原理</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>原理：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. 创建一个空对象</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 让 空对象的原型 指向 构造函数（Parent） 的原型对象</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

<span class="token comment">// 3. 调用 call，让 构造函数 的this 指向 这个空对象，执行构造函数，返回新对象</span>
<span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="window对象和document对象的区别"><a href="#window对象和document对象的区别" class="header-anchor">#</a> window对象和document对象的区别</h2> <p><code>window</code>对象表示：浏览器中打开的窗口；</p> <p><code>document</code>对象表示：当前页面；它是<code>window</code>下的一个对象属性</p> <h2 id="var、let、const"><a href="#var、let、const" class="header-anchor">#</a> var、let、const</h2> <p>3 个方面存在区别： <strong>作用域</strong>、<strong>变量提升</strong>、<strong>能否修改</strong>。</p> <table><thead><tr><th></th> <th style="text-align:left;">作用域</th> <th style="text-align:left;">变量提升</th> <th style="text-align:left;">可修改</th></tr></thead> <tbody><tr><td>var</td> <td style="text-align:left;"><strong>函数作用域</strong><br>  - 在 函数内部，声明为 “局部变量” <br> - 在 函数外部，声明为 “全局变量”（会挂在<code>window</code>上）</td> <td style="text-align:left;">声明前就可以用，但值为 <code>undefined</code></td> <td style="text-align:left;">√</td></tr> <tr><td>let</td> <td style="text-align:left;"><strong>块级作用域</strong><br> 仅在 块级内部有效</td> <td style="text-align:left;"><strong>不存在</strong>，会提示不能在声明前使用</td> <td style="text-align:left;">√</td></tr> <tr><td>const</td> <td style="text-align:left;"><strong>块级作用域</strong><br> 仅在 块级内部有效</td> <td style="text-align:left;"><strong>不存在</strong>，会提示不能在声明前使用</td> <td style="text-align:left;">×</td></tr> <tr><td>不使用声明符</td> <td style="text-align:left;"><strong>全局作用域</strong><br></td> <td style="text-align:left;"><strong>不存在</strong>，会提示变量未定义</td> <td style="text-align:left;">√</td></tr></tbody></table> <h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// var：函数作用域（在函数内部都有效）</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">letTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// 与“块外”且“函数内”的y，是相同的变量</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// let、const：块级作用域（仅在块级内有效）</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">letTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">{</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// 不同的变量</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="变量提升"><a href="#变量提升" class="header-anchor">#</a> 变量提升</h3> <p><strong>var</strong> 存在变量提升：在声明前就可以用，但值为undefined。</p> <p><strong>let</strong>、<strong>const</strong> 不存在变量提升。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// var声明：存在变量提升，但未undefined</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> name1<span class="token punctuation">,</span> name1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'undefined' undefined</span>

    <span class="token keyword">var</span> name1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// let声明，不存在变量提升（const是一样的error）</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> name2<span class="token punctuation">,</span> name2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught ReferenceError: Cannot access 'name2' before initialization</span>

    <span class="token keyword">let</span> name2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="练习-2"><a href="#练习-2" class="header-anchor">#</a> 练习</h3> <h4 id="利用settimeout输出当前的-i"><a href="#利用settimeout输出当前的-i" class="header-anchor">#</a> 利用setTimeout输出当前的 i</h4> <p>现象：</p> <ul><li>var定义：i 均为 最后一个数</li> <li>let定义：i 均为 正确的数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用 var 定义</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 10 10 10 10 10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 使用 let 定义</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 0 1 2 3 4 ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>原因：</p> <ul><li><code>setTimeout</code>是在 <strong>下一轮事件循环开始时</strong> 触发</li> <li><code>let</code>在循环体内会创建一个<strong>新的块级作用域</strong></li></ul> <h2 id="es5、es6、es7的区别"><a href="#es5、es6、es7的区别" class="header-anchor">#</a> ES5、ES6、ES7的区别</h2> <h3 id="es7"><a href="#es7" class="header-anchor">#</a> ES7</h3> <ul><li>Async、Await</li> <li>求幂运算符（<code>**</code>）</li> <li>Array.prototype.includes()</li></ul> <h2 id="js数组的方法"><a href="#js数组的方法" class="header-anchor">#</a> js数组的方法</h2> <h3 id="变异方法"><a href="#变异方法" class="header-anchor">#</a> 变异方法</h3> <ul><li>push()</li> <li>pop()</li> <li>shift()</li> <li>unshift()</li> <li>splice()
<ul><li>参数1：要操作的下标</li> <li>参数2：要<code>删除</code>的项目数量</li> <li>参数3：要新加入的项目</li> <li>返回：被移除掉的项（array）</li></ul></li> <li>sort()
<ul><li>参数：（可选）比较函数（function）
<ul><li><code>sort((a, b) =&gt; a - b)</code> // 升序（例子：[1, 2, 3]），这里的function不能直接返回boolean</li></ul></li> <li>不传参数：按照<code>字符编码的顺序</code>进行排序</li></ul></li> <li>reverse()</li></ul> <h3 id="非变异方法"><a href="#非变异方法" class="header-anchor">#</a> 非变异方法</h3> <ul><li><p>slice()</p> <ul><li>参数1：起始下标，闭区间</li> <li>参数2：终止下标，开区间（不指定，就是后面所有）</li> <li>返回：被截走的数组（array）</li></ul></li> <li><p>concat()</p> <ul><li>参数：要收录进数组的项（也可以是数组）</li> <li>返回：合并后的数组</li></ul></li> <li><p>filter()</p> <ul><li>参数：当前值为true，则会被返回</li> <li>返回：符合条件的数组</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// [5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>join()</p> <ul><li>参数：分隔符</li> <li>返回：字符串</li></ul></li> <li><p>forEach()</p> <ul><li>参数1：当前项</li> <li>参数2：当前项索引</li> <li>参数3：数组本身</li> <li>返回：undefined</li></ul></li> <li><p>map()</p> <ul><li>参数1：当前项</li> <li>参数2：当前项索引</li> <li>参数3：数组本身</li> <li>返回：一个新数组，旧数组不变</li></ul></li></ul> <h3 id="其它"><a href="#其它" class="header-anchor">#</a> 其它</h3> <ul><li><p>indexOf</p> <ul><li>参数：目标元素</li> <li>返回：第一个目标元素下标，若找不到返回<code>-1</code></li></ul></li> <li><p>findIndex</p> <ul><li>参数：(item) =&gt; item === xxx</li> <li>返回：满足函数的第一个值的下标</li></ul></li></ul> <h2 id="数组去重"><a href="#数组去重" class="header-anchor">#</a> 数组去重</h2> <p>以下两种方法，对于<strong>字符串、数字</strong>皆可。</p> <p>方法一：（利用对象属性）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// 从后向前遍历，以便于 arr.splice 不影响前面的元素</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">in</span> map <span class="token operator">?</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>方法二：（new Set）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> uniqueList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="for-in、object-keys、for-of"><a href="#for-in、object-keys、for-of" class="header-anchor">#</a> for...in、Object.keys、for...of</h2> <h3 id="枚举key值"><a href="#枚举key值" class="header-anchor">#</a> 枚举key值</h3> <ul><li>for...in（包括“自有属性”、“继承属性”）</li> <li>Object.keys（仅“自有属性”）<div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// for...in</span>

    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'heshiyu'</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 依次输出: 0 1 2</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 依次输出：0 1 2 3</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'heshiyu'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 依次输出：name</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li></ul> <h3 id="枚举value值"><a href="#枚举value值" class="header-anchor">#</a> 枚举value值</h3> <ul><li>for...of <em>（读取数组的value值）</em> <blockquote><p>只能遍历 “部署了Iterator接口的数据”</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'heshiyu'</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 依次输出：h e s h i y u</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 依次输出：1 9 6 7</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'heshiyu'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// error</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 原因：普通对象没有部署Iterator接口</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul> <p>因为<code>for...of</code>循环本质上是<strong>调用Iterator接口下的遍历器</strong>，所以它只适用于部署了 <strong>Iterator接口的数据</strong></p> <blockquote><p>（例如：数组、字符串、Set、Map、arguments、NodeList等）</p></blockquote> <blockquote><p>类似地，Object.getOwnPropertyNames()：返回一个数组，数组里是对象中<code>所有自有</code>属性（不管是否可枚举）</p></blockquote> <h2 id="math-floor、parseint"><a href="#math-floor、parseint" class="header-anchor">#</a> Math.floor、parseInt</h2> <p>相同：都能实现数字的 <strong>向下取整</strong></p> <p>不同：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">0.89</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
   Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
   <span class="token comment">// Math.floor 不能解析 非纯数字的 字符串</span>
   Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token string">&quot;760px&quot;</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>

   <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">0.89</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
   <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
   <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;760px&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 760</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="this的指向"><a href="#this的指向" class="header-anchor">#</a> this的指向</h2> <p>“<code>this</code>的指向” 可以分为 2 种情况：非箭头函数、箭头函数。</p> <blockquote><p>“this指向” 一般讨论的是 “函数内部this的指向”</p></blockquote> <h3 id="非箭头函数"><a href="#非箭头函数" class="header-anchor">#</a> 非箭头函数</h3> <p>非箭头函数内的 <code>this指向</code> 取决于 <strong>函数被调用时的上下文环境</strong>。</p> <p>常见的几种情况：全局函数内、构造函数内、对象方法内。</p> <ul><li>在 <strong>全局函数</strong> 内，this指向<code>window</code>（非严格模式）；this指向<code>undefined</code>（严格模式）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">func1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// `window`</span>
    <span class="token punctuation">}</span>
    <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>在 <strong>构造函数</strong> 内，this 指向 <strong>新创建的对象</strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'heshiyu'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>在 <strong>对象的方法</strong> 内，this 指向 <strong>该对象</strong>（可通过call、apply、bind可以改变<code>this</code>指向）。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">baseSay</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> fakeObj <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj</span>
    obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fakeObj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fakeObj</span>

    obj<span class="token punctuation">.</span><span class="token function">baseSay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window（指向“箭头函数在定义时的外层函数/对象”它所在的对象）</span>
    obj<span class="token punctuation">.</span><span class="token function">baseSay</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fakeObj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window（call无法改变箭头函数this指向）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <p><strong>箭头函数</strong>，不会创建自己的 this，它只会从自己的作用域链的上一层继承 this。</p> <p>例子：https://juejin.cn/post/6844903573428371464</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">fn1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">a</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                b<span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token function-variable function">c</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">fn0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>b<span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 得到的{fn1: f}对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="this绑定规则的优先级"><a href="#this绑定规则的优先级" class="header-anchor">#</a> this绑定规则的优先级</h2> <p>优先级：<strong>new绑定 &gt; 显式绑定 &gt; 隐式绑定 &gt; 默认绑定</strong></p> <h3 id="_4种绑定"><a href="#_4种绑定" class="header-anchor">#</a> 4种绑定</h3> <ul><li><strong>默认绑定</strong>：此时this指向全局对象（若在严格模式下，this指向undefind）</li> <li><strong>隐式绑定</strong>：此时this指向当前对象</li> <li><strong>显式绑定</strong>：此时this指向<code>call</code>、<code>apply</code>、<code>bind</code>指定的对象</li> <li><strong>new绑定</strong>：此时this指向新对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'hehe'</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'heshiyu'</span><span class="token punctuation">,</span>
    fn<span class="token operator">:</span> fn
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'huangxiaoming'</span><span class="token punctuation">,</span>
    fn<span class="token operator">:</span> fn
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hehe'，属于“默认绑定”。此时this指向`Window`（严格模式下为undefind）</span>
obj1<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'heshiyu'，属于“隐式绑定”。此时this指向obj1对象</span>
obj1<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'huangxiaoming'，属于“显式绑定”。此时this指向obj2对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="练一练"><a href="#练一练" class="header-anchor">#</a> 练一练</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
 name<span class="token operator">:</span> <span class="token string">&quot;obj1&quot;</span><span class="token punctuation">,</span>
 <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;obj2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj3 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;obj3&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
obj1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>say <span class="token operator">=</span> obj1<span class="token punctuation">.</span>say<span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
obj3<span class="token punctuation">.</span>say <span class="token operator">=</span> obj1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj3<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> func <span class="token operator">=</span> obj1<span class="token punctuation">.</span>say<span class="token punctuation">;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>答案：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>obj1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'obj1'。隐式绑定。this指向obj1</span>

obj2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'obj2'。因为 非箭头函数this指向由执行环境 决定，此时可理解为 obj2的隐式绑定，所以this指向obj2</span>

obj3<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'obj2'。bind改变了this指向为obj2，属于“显式绑定” &gt; “隐式绑定”</span>

<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'undefined'。默认绑定。this指向全局。（若为严格模式，this指向undefined，会报错找不到name属性）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="ajax"><a href="#ajax" class="header-anchor">#</a> Ajax</h2> <p>原理：</p> <ul><li>实例化一个<code>XMLHttpRequest</code>对象</li> <li>设置回调函数<code>onreadystatechange</code></li> <li>使用<code>open</code>、<code>setRequestHeader</code>、<code>send</code>结合发送请求</li></ul> <p>其中<code>xhr.readyState</code>有如下5种状态：</p> <ul><li>0：open未调用</li> <li>1：open已调用</li> <li>2：接收到头信息</li> <li>3：接收到响应主体
<ul><li>根据响应的MIME类型，把数据转换成能通过responseBody、responseText或responseXML属性存取的格式</li></ul></li> <li>4：响应完成</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'http://www.api.com/checkLogin'</span>
   <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 或ActiveXObject</span>

   xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// true表明该请求是异步的</span>
   xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'x-from'</span><span class="token punctuation">,</span> <span class="token string">'pc'</span><span class="token punctuation">)</span>

   xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>success <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'您的账号暂无权限，请先注册~'</span><span class="token punctuation">)</span>
           <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>success <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'/index/0'</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

   xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span>
   xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="dom绑定事件的三种方式"><a href="#dom绑定事件的三种方式" class="header-anchor">#</a> DOM绑定事件的三种方式</h2> <ul><li><p>【HTML 事件处理】在DOM元素上直接绑定</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>【DOM 0级事件处理】在JavaScript代码中绑定</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myID'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>【DOM 2级事件处理】绑定事件监听函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handle<span class="token punctuation">,</span> useCapture<span class="token punctuation">)</span>
<span class="token comment">// 第一个参数：事件名称</span>
<span class="token comment">// 第二个参数：事件处理函数</span>
<span class="token comment">// 第三个参数：是否使用捕获（默认false，即事件冒泡）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h2 id="三种事件流模型"><a href="#三种事件流模型" class="header-anchor">#</a> 三种事件流模型</h2> <ul><li>IE的事件冒泡</li> <li>Netscape的事件捕获</li> <li>DOM的事件流
<ul><li>DOM 2级事件规定，事件流包括三个阶段：<code>事件捕获</code>、<code>目标阶段</code>、<code>事件冒泡</code></li></ul></li></ul> <h2 id="target、currenttarget"><a href="#target、currenttarget" class="header-anchor">#</a> target、currentTarget</h2> <ul><li>event.target：返回的是<code>触发事件</code>的元素</li> <li>event.currentTarget：返回的是<code>绑定事件</code>的元素</li></ul> <h2 id="script标签的加载规则"><a href="#script标签的加载规则" class="header-anchor">#</a> script标签的加载规则</h2> <p>js脚本可分为 <strong>“加载”、“执行”</strong> 两阶段。</p> <p>其中，<strong>“加载” 阶段</strong> 可以支持异步：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// （默认）同步加载，会阻塞DOM渲染</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 异步加载。页面加载完后执行</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./test.js&quot;</span> defer<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 异步加载。js脚本加载完后立即执行（JS引擎会抢占执行权）</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./test.js&quot;</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/5621228646/44e5/62ec/1441/570e80c035d2087cf6c9e30ed8c08560.png" alt="alt"></p> <ul><li><code>defer</code> 会按照它在页面中出现的顺序加载</li> <li><code>async</code> 不能保证按顺序</li></ul> <h2 id="扩展运算符-、object-assign"><a href="#扩展运算符-、object-assign" class="header-anchor">#</a> 扩展运算符（...）、Object.assign()</h2> <p>对象浅拷贝：</p> <ul><li>扩展运算符（...）</li> <li>Object.assign()</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token operator">...</span>obj2<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>浅拷贝</strong>拷贝的是<code>值的引用</code>，<strong>深拷贝</strong>拷贝的是<code>值的副本</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span> 
    name<span class="token operator">:</span> <span class="token string">'I am o1'</span><span class="token punctuation">,</span>
    address<span class="token operator">:</span> <span class="token punctuation">{</span>
        province<span class="token operator">:</span> <span class="token string">'gd'</span><span class="token punctuation">,</span>
        city<span class="token operator">:</span> <span class="token string">'qy'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> o4 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>o1 <span class="token punctuation">}</span>

o4<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'I am o4'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o4<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span>
<span class="token comment">// { name: 'I am o4', address: { province: 'gd', city: 'qy' } }</span>
<span class="token comment">// { name: 'I am o1', address: { province: 'gd', city: 'qy' } }</span>

o1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'I am new o1'</span>
o1<span class="token punctuation">.</span>address<span class="token punctuation">.</span>province <span class="token operator">=</span> <span class="token string">'hz'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o4<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span>
<span class="token comment">// { name: 'I am o4', address: { province: 'hz', city: 'qy' } }</span>
<span class="token comment">// { name: 'I am new o1', address: { province: 'hz', city: 'qy' } }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="堆、栈区别"><a href="#堆、栈区别" class="header-anchor">#</a> 堆、栈区别</h3> <h2 id="深拷贝"><a href="#深拷贝" class="header-anchor">#</a> 深拷贝</h2> <p>若被拷贝的对象内没有 <code>function</code> 属性，可以使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 先序列化，再反序列化。</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>或者 <strong>使用递归</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 时间复杂度: O(nlogn)</span>
<span class="token comment">// for(O(n))内有递归(O(logn))</span>
<span class="token keyword">let</span> <span class="token function-variable function">deepClone</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 若不是引用类型，直接返回本身</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>source <span class="token operator">||</span> <span class="token keyword">typeof</span> source <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> source<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 要拷贝的引用类型是“数组”，还是“对象”</span>
    <span class="token keyword">let</span> targetObj <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 遍历key</span>
    <span class="token comment">// for...in可遍历出: “自有属性”、“继承属性”</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 若当前key值不是自有属性，直接跳过</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>source<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 若当前key值对应的值不是引用类型</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            targetObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            targetObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> targetObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="暂时性死区-tdz"><a href="#暂时性死区-tdz" class="header-anchor">#</a> 暂时性死区（TDZ）</h2> <blockquote><p>Temporal Dead Zone</p></blockquote> <p>let、const是块级作用域；var是函数作用域</p> <p>=&gt; 只要块级作用域存在let命令，它们就不能在被声明之前读或写。</p> <p>=&gt; 虽然这些变量始终“存在”于它们的作用域里，但在直到声明它的代码之前的区域都属于<code>暂时性死区</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token number">123</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tmp <span class="token operator">=</span> <span class="token string">'hsy'</span> <span class="token comment">// ReferenceError</span>
    <span class="token keyword">let</span> tmp
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面代码中，虽然在全局变量有声明tmp的值是123，但是在<code>let tmp</code>所处的块级作用域中，let又声明了一个同名的局部变量tmp，导致了后面的这个tmp绑定了这个块级作用域。所以在这个区域中，<strong>只要是提前使用了tmp，就会报错</strong>。</p> <p>=&gt; 总之，在代码块内，使用let声明变量之前，该变量都是不可用的。这就是<strong>暂时性死区</strong>（temporal dead zone，简称TDZ）</p> <h2 id="reduce"><a href="#reduce" class="header-anchor">#</a> reduce()</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span> curVal<span class="token punctuation">,</span> curIndex<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用于执行每个数组元素的函数</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> initVal<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span> curVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>total <span class="token operator">+</span> curVal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// 16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="函数的内部属性"><a href="#函数的内部属性" class="header-anchor">#</a> 函数的内部属性</h2> <h3 id="函数内部属性一-arguments"><a href="#函数内部属性一-arguments" class="header-anchor">#</a> 函数内部属性一：arguments</h3> <p><code>arguments</code>是一个类数组对象，包含着：</p> <ul><li><strong>传入函数中的所有参数</strong></li> <li><strong>callee属性</strong></li> <li><strong>length属性</strong></li></ul> <p><img src="/blog/assets/img/Argument-1.73b4e859.png" alt="alt"></p> <ul><li><code>传入的参数</code>：
<ul><li><code>argument[0]</code>、<code>argument[1]</code>...去获取对应位置传入的参数</li> <li>若在函数体里利用<code>argument[x]</code>修改 <strong>对应位置x传入的参数</strong> 的值，会同步在后续中对应位置x传入参数
<img src="/blog/assets/img/Argument-2.9a936440.png" alt="alt"></li></ul></li> <li><code>length属性</code>：返回 <strong>实际传入参数的个数</strong></li> <li><code>callee属性</code>：是一个引用，指向 <strong>当前所执行的函数</strong></li></ul> <blockquote><p>在<code>'use strict'</code>下，该callee属性会被禁用</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 不足：函数的执行 与 函数名 紧密耦合。</span>
<span class="token comment">// 因为函数名一旦修改，就会连同下面 return的factorial 也要改</span>
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token comment">// 改成这样就不用担心“函数改名”问题了</span>
        <span class="token comment">// return num * arguments.callee(num - 1)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="函数内部属性二-特殊对象this"><a href="#函数内部属性二-特殊对象this" class="header-anchor">#</a> 函数内部属性二：特殊对象this</h3> <p><code>this</code>指向的是：函数执行的环境对象（若在全局中，this的值是<code>window</code>）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> color <span class="token operator">=</span> <span class="token string">'red'</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    color<span class="token operator">:</span> <span class="token string">'blue'</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span> <span class="token comment">// 调用函数前，this的值并不确定。在执行过程中确定。</span>
<span class="token punctuation">}</span>

<span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'red'，因为在全局作用域</span>


o<span class="token punctuation">.</span>sayColor <span class="token operator">=</span> sayColor
o<span class="token punctuation">.</span><span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'blue'，因为是在对象o的作用域</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p><code>函数名</code> 实际上是一个 <code>指向函数对象的指针</code>，所以这里<code>o.sayColor = sayColor</code>之后，即使在不同环境执行，全局的<code>sayColor</code>函数与<code>o.sayColor</code>函数指向的仍然是同一个函数。</p> <p><strong>函数声明</strong> 定义的函数、直接通过 <strong>函数表达式</strong> 定义的函数，效果是一样的（<code>函数名</code> 实际上是一个 <code>指向函数对象的指针</code>）。</p></blockquote> <h3 id="函数内部属性三-caller"><a href="#函数内部属性三-caller" class="header-anchor">#</a> 函数内部属性三：caller</h3> <p><code>caller</code>指向的是 <strong>调用当前函数的父函数引用</strong>（若在全局中调用当前函数，caller的值是<code>null</code>）</p> <blockquote><p>使用：函数名.caller</p></blockquote> <p>也可以通过<code>arguments.callee.caller</code>，是一样的效果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>inner<span class="token punctuation">.</span>caller<span class="token punctuation">)</span> <span class="token comment">// 显示outer的源码</span>
<span class="token punctuation">}</span>
<span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="事件处理函数和默认行为的执行顺序"><a href="#事件处理函数和默认行为的执行顺序" class="header-anchor">#</a> 事件处理函数和默认行为的执行顺序</h2> <p>大多数情况下，是先执行<strong>事件处理函数</strong>，再执行<strong>默认行为</strong>。</p> <blockquote><p>因为可以通过 “事件处理函数” 去阻止“默认行为”</p></blockquote> <p>也有例外：</p> <ul><li>checkbox的<strong>事件默认行为会先执行</strong>。如果一旦阻止了默认行为，就会<strong>恢复到执行默认行为之前的状态</strong>（用户无感知）</li></ul> <h2 id="计算随机数0-5、95-99"><a href="#计算随机数0-5、95-99" class="header-anchor">#</a> 计算随机数0-5、95-99</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [0, 1)之间的浮点数</span>
Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token comment">// [0, 10)之间的浮点数</span>

<span class="token comment">// 0-5</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">// [0, 6)之间的整数，向下取整</span>

<span class="token comment">// 95-99</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">95</span><span class="token punctuation">)</span> <span class="token comment">// [95, 100)之间的整数，向下取整</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="柯里化"><a href="#柯里化" class="header-anchor">#</a> 柯里化</h2> <p>柯里化是一种采用了<strong>高阶函数</strong>的<strong>函数式编程技巧</strong>。</p> <ul><li>先传递一部分参数给指定函数</li> <li>这个函数会返回另外一个函数</li> <li>由被返回的函数去处理剩下的参数</li></ul> <p>好处：</p> <ul><li>参数复用</li> <li>提前返回<div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// before</span>
<span class="token keyword">var</span> <span class="token function-variable function">addEvent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> type<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> capture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> capture<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        el<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// after</span>
<span class="token keyword">var</span> addEvent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> sType<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> capture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>sType<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> e<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> capture<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> sType<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> capture</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            el<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> sType<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> e<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></li> <li>延迟运行</li></ul> <h2 id="es6新数据结构set、map"><a href="#es6新数据结构set、map" class="header-anchor">#</a> ES6新数据结构Set、Map</h2> <h3 id="set"><a href="#set" class="header-anchor">#</a> Set</h3> <p>Set类似于<strong>数组</strong>，特点是里面的<code>值是唯一</code>的（即不会出现重复）、且<code>遍历顺序就是插入顺序</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 新建一个Set结构</span>
<span class="token keyword">var</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'贺世宇'</span><span class="token punctuation">,</span> <span class="token string">'作者'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>实例属性：</p> <ul><li>size</li></ul> <p>它有4个操作方法、4个遍历方法</p> <ul><li><p>操作：</p> <ul><li>add(value)</li> <li>delete(value)</li> <li>has(value)</li> <li>clear()</li></ul></li> <li><p>遍历：</p> <ul><li>keys() //由于Set没有键值，那么键名===键值</li> <li>values()</li> <li>entries()</li> <li>forEach() // 接受第二个参数，用于绑定this</li></ul></li></ul> <p>用处：<strong>对数组去重</strong>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>

<span class="token keyword">var</span> crr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="map"><a href="#map" class="header-anchor">#</a> Map</h3> <p>Map类似于<strong>对象</strong>，也是键值对集合。特点是里面的<code>键（key）不仅限于字符串</code>、且<code>遍历顺序就是插入顺序</code>。<strong>（可保证键值唯一）</strong></p> <p><img src="/blog/assets/img/Map-1.5523767b.png" alt="alt"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 新建一个Map结构</span>
<span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'贺世宇'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'作者'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>实例属性：</p> <ul><li>size</li></ul> <p>它有5个操作方法、4个遍历方法：</p> <ul><li><p>操作</p> <ul><li>set(key, value) // 返回最新Map，所以可以链式调用</li> <li>get(key)</li> <li>has(key)</li> <li>delete(key)</li> <li>clear()</li></ul></li> <li><p>遍历</p> <ul><li>keys() // 注意，无参数</li> <li>values() // 注意，无参数</li> <li>entries() // 注意，无参数</li> <li>forEach() // 第一个参数是迭代函数（val, key, map），接受第二个参数，用于绑定this</li></ul></li></ul> <p>和<strong>普通对象</strong>的区别：</p> <table><thead><tr><th></th> <th>Map</th> <th>普通对象</th></tr></thead> <tbody><tr><td>key的类型</td> <td>任意类型</td> <td>只能是字符串</td></tr> <tr><td>遍历key值</td> <td>变量.keys()</td> <td>Object.keys(obj)</td></tr> <tr><td>遍历顺序</td> <td>插入顺序</td> <td>对象散列结构，无顺序</td></tr></tbody></table> <p>和<strong>WeakMap</strong>的区别：</p> <ul><li>Map里的键可以是任何类型，但WeakMap里的键<strong>只能是对象引用</strong></li> <li>WeakMap不能包含无引用对象，否则会被自动清除出集合（垃圾回收机制）</li> <li>WeakMap对象不可枚举</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> weakmap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> keyObject <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> valObject <span class="token operator">=</span> <span class="token punctuation">{</span> score<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

weakmap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>keyObject<span class="token punctuation">,</span> valObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakmap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>keyObject<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { score: 100 }</span>

keyObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 将这个对象置为null，无人引用</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakmap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>keyObject<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="遍历value值-for-of"><a href="#遍历value值-for-of" class="header-anchor">#</a> 遍历value值（for...of）</h3> <p>对于<code>Map对象</code>，如果需要遍历<code>value</code>时，可以使用<code>map.entries()</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Map(1) {7 =&gt; Array(1)}</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Map(2) {7 =&gt; Array(1), 19 =&gt; Array(1)}</span>

<span class="token comment">// 使用`map.entries()`</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="和-的区别"><a href="#和-的区别" class="header-anchor">#</a> ==和===的区别</h2> <p><code>==</code>：先<strong>类型转换</strong>，再<strong>比较值</strong>；</p> <p><code>===</code>：先<strong>比较值</strong>，再<strong>转换类型</strong>。</p> <h2 id="js的继承"><a href="#js的继承" class="header-anchor">#</a> JS的继承</h2> <ul><li>原型链
<ul><li>原理：1、先创建子类的实例对象this；2、再将父类的方法添加到this上</li></ul></li> <li>Class的extends
<ul><li>原理：1、先创建父类的实例对象（调用super）；2、通过子类的构造函数修改this</li></ul></li></ul> <h3 id="组合继承"><a href="#组合继承" class="header-anchor">#</a> 组合继承：</h3> <p>组合<code>原型继承、借用构造函数</code>，使得 <strong>实例化的对象</strong> 具有：</p> <ul><li>各自的实例属性/方法</li> <li>公用的原型属性/方法。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>skin <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 此时Student.prototype被重写了，变成Student.prototype === Person</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student <span class="token comment">// 将原型对象上的constructor重新指向Student构造函数</span>

<span class="token keyword">var</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'heshiyu'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="js垃圾回收机制"><a href="#js垃圾回收机制" class="header-anchor">#</a> JS垃圾回收机制</h2> <h3 id="标记清除"><a href="#标记清除" class="header-anchor">#</a> 标记清除</h3> <p>原理：将 <strong>仍拥有标记的变量</strong> 清除。</p> <blockquote><p>主流浏览器都是使用 “标记清除”，只不过收集的间隔有所不同。</p></blockquote> <ul><li>先给内存中的所有变量加上标记</li> <li>然后会去掉：<strong>环境中的变量</strong>、<strong>被环境中变量引用的</strong> 的标记</li> <li>“垃圾收集器”会将 <strong>仍存在标记的变量</strong> 进行清除。</li></ul> <h3 id="引用计数"><a href="#引用计数" class="header-anchor">#</a> 引用计数</h3> <p>原理：将 <strong>被引用的次数为0的堆内存</strong> 清除。</p> <ul><li>声明一个引用类型的变量时，对应堆内存的引用次数为1。</li> <li>相反，如果取消了引用，那 原来这块堆内存的值 就-1。</li> <li>“垃圾收集器”会将 <strong>引用次数为0的堆内存</strong> 进行清除。</li></ul> <blockquote><p>若存在循环引用，那这两个对象引用次数是2，永远不会被回收</p></blockquote> <h2 id="tostring-、valueof"><a href="#tostring-、valueof" class="header-anchor">#</a> toString()、valueOf()</h2> <p>所有（<strong>undefined、null除外</strong>）都继承了这两个方法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
    c <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    d <span class="token operator">=</span> <span class="token punctuation">{</span> test<span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span> example<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">e</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'example'</span><span class="token punctuation">]</span>

a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '3'（重写版）</span>
b<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '3'（重写版）</span>
c<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'true'（重写版）</span>
d<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '[object Object]'</span>
e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// function(){ console.log('example') }（重写版）</span>
f<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'text,example'。相当于arr.join(',')（重写版）</span>

a<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
b<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '3'</span>
c<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
d<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// {test: &quot;123&quot;, example: 123}</span>
e<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// function(){ console.log('example') }</span>
f<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ['test', 'example']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="tostring"><a href="#tostring" class="header-anchor">#</a> toString()</h3> <p>返回&quot;该对象的字符串表示&quot;</p> <blockquote><p>如果此方法在 “自定义对象中” 未被覆盖，toString() 返回 <code>&quot;[object type]&quot;</code>，其中 <code>type</code> 是对象的类型。</p></blockquote> <h3 id="使用tostring-检测对象类型"><a href="#使用tostring-检测对象类型" class="header-anchor">#</a> 使用toString()检测对象类型</h3> <ul><li>方法一：
<code>Object.prototype.toString.call(obj)</code></li></ul> <h4 id="为什么用call"><a href="#为什么用call" class="header-anchor">#</a> 为什么用<code>call</code>？</h4> <p>原因：<code>Number</code>、<code>String</code>、<code>Boolean</code>、<code>function</code>、<code>Array</code>是Object的实例，都重写了toString方法。根据原型链，直接调用的话，是对应的重写之后的<code>toString</code>，而不会去调用Object上原型的toString方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// [object array]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>方法二：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="valueof"><a href="#valueof" class="header-anchor">#</a> valueOf()</h3> <p>返回“该对象的原始值”</p> <h3 id="不同类型对象下valueof-方法的返回值"><a href="#不同类型对象下valueof-方法的返回值" class="header-anchor">#</a> 不同类型对象下valueOf()方法的返回值</h3> <table><thead><tr><th>对象</th> <th>返回值</th></tr></thead> <tbody><tr><td>String</td> <td>字符串</td></tr> <tr><td>Number</td> <td>数值</td></tr> <tr><td>Boolean</td> <td>布尔值</td></tr> <tr><td>Object</td> <td>对象本身</td></tr> <tr><td>Array</td> <td>返回数组的对象本身</td></tr> <tr><td>Date</td> <td>返回从 1970年 1 月 1 日午夜开始计的毫秒数</td></tr> <tr><td>Function</td> <td>函数本身</td></tr></tbody></table> <h2 id="类数组对象、可遍历对象"><a href="#类数组对象、可遍历对象" class="header-anchor">#</a> 类数组对象、可遍历对象</h2> <p>从<code>普通数组</code>开始说起：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 当我们对一个普通数组进行 扩展运算符 展开时，可正常展开</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>但 <code>对象</code> 是不行的：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'heshiyu'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">21</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught TypeError: Found non-callable @@iterator</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>因为对象没有部署<code>Iterator</code>接口。</p> <h3 id="类数组对象"><a href="#类数组对象" class="header-anchor">#</a> 类数组对象</h3> <p><strong>类数组对象</strong> 指的是：</p> <ul><li>具有 <code>length属性</code></li> <li>除了<code>length</code>，<strong>其余key值都为“下标”</strong></li></ul> <blockquote><p>之所以提到 <code>length</code> ，是因为让人容易联想到 <code>array.length</code></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> objLikeArr <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    length<span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// 对象没有部署Iterator接口，无法展开</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>objLikeArr<span class="token punctuation">)</span> <span class="token comment">// Uncaught TypeError: Found non-callable @@iterator</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="如何展开类数组对象"><a href="#如何展开类数组对象" class="header-anchor">#</a> 如何展开类数组对象？</h4> <p>思想：<strong>先转换成可遍历对象，再展开</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法一：通过 `Array.prototype.slice.call()` 对它转换后，再进行展开：</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>objLikeArr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1 2</span>

<span class="token comment">// 方法二：通过 `Array.from()` 对它转换后，再进行展开：</span>
<span class="token comment">// `Array.from`除了可以对 `类数组对象` 进行转换成数组，</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>objLikeArr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1 2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="array-from"><a href="#array-from" class="header-anchor">#</a> Array.from</h4> <p><code>Array.from</code>也可以对 <code>NodeList</code> 、 <code>Set实例</code> 进行转换：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// NodeList</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// Set实例</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="可遍历对象"><a href="#可遍历对象" class="header-anchor">#</a> 可遍历对象</h3> <p><strong>可遍历对象</strong> 指的是：</p> <ul><li>部署了 <code>Iterator</code> 接口</li></ul> <blockquote><p>如：Array、Map、Set、String、arguments对象、NodeList对象</p></blockquote> <p>展开可遍历对象的方式：</p> <ul><li>扩展运算符（...)</li> <li>...Array.from()</li></ul> <h2 id="find-、-findindex-和-filter"><a href="#find-、-findindex-和-filter" class="header-anchor">#</a> [ ].find()、[ ].findIndex()和[ ].filter()</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// find：找到符合条件的第一个元素</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// 5</span>

<span class="token comment">// findIndex：找到符合条件的第一个元素下标</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// 2</span>

<span class="token comment">// filter：找到符合条件的子集</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">// [5, 8]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="判断对象是否为空对象"><a href="#判断对象是否为空对象" class="header-anchor">#</a> 判断对象是否为空对象{}</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法一:</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 方法二: 将对象序列化成字符串</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'{}'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="object-defineproperty"><a href="#object-defineproperty" class="header-anchor">#</a> Object.defineProperty</h2> <blockquote><p>对象里的 属性值 并不只有 <code>值</code> 那么简单。</p></blockquote> <p><code>Object.defineProperty</code>可以给对象添加属性，这个属性可以 <strong>更定制化地</strong> 去定义。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>obj</strong>: 被操作的对象</li> <li><strong>key</strong>: 要添加的 key 值</li> <li><strong>descriptor</strong>: 属性描述符，可以分为：
<ul><li>数据描述符：不具有<code>writable</code>、<code>value</code>、<code>get</code>、<code>set</code>中的任何一个</li> <li>访问器描述符</li></ul></li></ul> <table><thead><tr><th></th> <th>configurable</th> <th>enumerable</th> <th>writable</th> <th>value</th> <th>get</th> <th>set</th></tr></thead> <tbody><tr><td>默认值</td> <td>false</td> <td>false</td> <td>false</td> <td>undefined</td> <td>undefined</td> <td>undefined</td></tr> <tr><td>数据描述符</td> <td>✅</td> <td>✅</td> <td>✅</td> <td>✅</td> <td>❌</td> <td>❌</td></tr> <tr><td>访问器描述符</td> <td>✅</td> <td>✅</td> <td>❌</td> <td>❌</td> <td>✅</td> <td>✅</td></tr></tbody></table> <ul><li>描述符的默认值：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 省略了描述符</span>
  <span class="token comment">// 效果：configurable、enumerable、writable（均为false）；</span>
  <span class="token comment">// value、get、set（均为undefined）</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>使用<code>直接赋值</code>的方式创建对象的属性，enumerable为true</li></ul> <h3 id="writable-可修改性"><a href="#writable-可修改性" class="header-anchor">#</a> writable（可修改性）</h3> <p>能否 <strong>修改</strong> 这个属性。</p> <blockquote><p>为 false 时进行值的修改，不会报错，但值也不会变</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// Creates a new object</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  writable<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

o<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 不会报错，但值也不会变</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="enumerable-可枚举性"><a href="#enumerable-可枚举性" class="header-anchor">#</a> enumerable（可枚举性）</h3> <p>能否 <strong>枚举</strong> 到这个属性。</p> <blockquote><p>若为false，则不能在 <code>for...in</code> 或 <code>Object.keys()</code> 中被枚举。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> enumerable<span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> enumerable<span class="token operator">:</span><span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value <span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 省略了指enumerable，默认false</span>
o<span class="token punctuation">.</span>e <span class="token operator">=</span> <span class="token number">4</span> <span class="token comment">// 如果使用直接赋值的方式创建对象里的属性，则这个属性的enumerable为true</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 'a' 'e'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="configurable-可配置性"><a href="#configurable-可配置性" class="header-anchor">#</a> configurable（可配置性）</h3> <ul><li>能否 <strong>删除</strong> 这个属性</li> <li>能否 操作这个属性的 <strong>（除value、writable以外的）描述符</strong> 。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    configurable<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">delete</span> o<span class="token punctuation">.</span>a <span class="token comment">// 返回false,删除不成功</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><a href="http://www.softwhy.com/article-9359-1.html" target="_blank" rel="noopener noreferrer">configurable、enumerable和writable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="with函数"><a href="#with函数" class="header-anchor">#</a> with函数</h2> <p><code>with</code>函数可以将某个对象添加到作用域链的顶部</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'heshiyu'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">24</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">with</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'heshiyu', 24</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="scroll事件不能阻止冒泡"><a href="#scroll事件不能阻止冒泡" class="header-anchor">#</a> scroll事件不能阻止冒泡</h2> <p>实例：弹出层的scroll滑到顶、底部会冒泡到外层的scroll</p> <p>MDN：https://developer.mozilla.org/en-US/docs/Web/API/Document/scroll_event</p> <p>解决办法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">'hidden'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="向下、向上取整"><a href="#向下、向上取整" class="header-anchor">#</a> 向下、向上取整</h2> <p><code>Math.ceil</code>: 向上</p> <p><code>Math.floor</code>: 向下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">1.1</span><span class="token punctuation">;</span>

Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="尾递归"><a href="#尾递归" class="header-anchor">#</a> 尾递归</h2> <ul><li><strong>尾调用</strong> 是函数在 <code>return</code> 时 单纯调用 另一个函数</li> <li><strong>尾递归</strong> 是函数在 <code>return</code> 时 单纯调用 自身</li></ul> <p>（注意：单纯调用，指“不带别的操作”）</p> <p><strong>特点：</strong> <strong>尾递归</strong> 只会存一条调用记录，永远不会发生 <strong>栈溢出</strong>。</p> <blockquote><p>普通递归 非常耗费内存，因为需要同时保存 成千上百条 调用记录（容易发生“栈溢出”）。</p></blockquote> <h3 id="改写成尾递归"><a href="#改写成尾递归" class="header-anchor">#</a> 改写成尾递归</h3> <p><strong>尾递归</strong> 往往需要改写 递归 函数，确保最后一步 只调用自身 。</p> <blockquote><p>做法：把所有用到的 “内部变量” 改成 “函数的入参”。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 普通递归：最多需要保存 n 个调用记录。复杂度 O(n)</span>
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 120</span>


<span class="token comment">// 尾递归：只保留一个调用记录。复杂度 O(1)</span>
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> total<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 120</span>


<span class="token comment">// 尾递归（更直观的形式）：</span>
<span class="token keyword">function</span> <span class="token function">tailFactorial</span><span class="token punctuation">(</span><span class="token parameter">n <span class="token punctuation">,</span>total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> total<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">tailFactorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">tailFactorial</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 120</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="尾调用优化"><a href="#尾调用优化" class="header-anchor">#</a> 尾调用优化</h3> <p><strong>尾调用优化</strong> 可以理解为，调用 <code>g(3)</code> 后，<code>函数f</code> 就结束了，所以执行到最后一步，完全可以删除 <code>f()</code> 的调用记录，只保留 <code>g(3)</code> 的调用记录。</p> <p>ES6的 <strong>尾调用优化</strong> 只在 “严格模式” 下生效。</p> <blockquote><p>因为在 “严格模式”下， <code>arguments</code>、<code>caller</code>（返回调用当前函数的那个函数），会禁用这 2 个参数</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等同于</span>
<span class="token function">g</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <p>将以下代码改成 <strong>尾递归</strong>。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>要求：扁平化数组

输入：[a,[b,[c]]] 
[a,a,v]

输入：[[[[a]]], b, c]
输出：[a, b, c]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 普通递归：</span>
<span class="token keyword">function</span> <span class="token function">searchArr</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token keyword">const</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">!==</span> Array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ans<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">search</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">search</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">searchArr</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 尾递归：</span>
<span class="token keyword">function</span> <span class="token function">searchArr</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> ans</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">const</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> ans</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">!==</span> Array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ans<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token function">search</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token function">search</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">searchArr</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>对于 “尾递归” 的例子，还可以看<a href="/skill/algorithm/search">二分查找</a></p> <h3 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h3> <ul><li><a href="https://www.ruanyifeng.com/blog/2015/04/tail-call.html" target="_blank" rel="noopener noreferrer">尾调用优化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="stoppropagation"><a href="#stoppropagation" class="header-anchor">#</a> stopPropagation</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>entry-settle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>creator-company<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://music.163.com/musician/company<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mcnDetail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mcn-detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        查看详情
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mcnDetail'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 通过 阻止冒泡 无法阻止 外层a标签 的跳转</span>
    <span class="token comment">// 原因：a标签是通过href跳转，不是事件层面</span>
    <span class="token comment">// 解决：针对 a标签也通过 监听click 进行跳转，才可以实现阻止冒泡泡</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'https://music.163.com/m/at/604721b6e9c3acc4f5eb4a9f'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">11/7/2021, 7:53:13 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/skill/js/typescript/" class="prev">
        Typescript
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.8dd0e736.js" defer></script><script src="/blog/assets/js/2.9a5e99eb.js" defer></script><script src="/blog/assets/js/18.94239f10.js" defer></script>
  </body>
</html>
