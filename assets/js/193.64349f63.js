(window.webpackJsonp=window.webpackJsonp||[]).push([[193],{772:function(s,n,a){"use strict";a.r(n);var t=a(56),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"http-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-server"}},[s._v("#")]),s._v(" http-server")]),s._v(" "),a("p",[s._v("通过"),a("code",[s._v("http-server")]),s._v("可以在本地启动一个微型服务器，来调试打包后的文件。")]),s._v(" "),a("blockquote",[a("p",[s._v("可以省去部署的麻烦。")])]),s._v(" "),a("p",[s._v("前提：")]),s._v(" "),a("p",[s._v("需要修改打包文件的"),a("strong",[s._v("输出路径前缀")]),s._v("："),a("code",[s._v("publicPath")])]),s._v(" "),a("blockquote",[a("p",[s._v("一般在webpack.prod.js > output.publicPath")]),s._v(" "),a("p",[s._v("需要改为"),a("code",[s._v("/")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 工程打包\nnpm run build\n\n// 进入工程的dist（或build）文件夹\ncd dist\n\n// 启动http-server\nhttp-server .\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"可能会遇到的跨域问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可能会遇到的跨域问题"}},[s._v("#")]),s._v(" 可能会遇到的跨域问题")]),s._v(" "),a("ul",[a("li",[s._v("修改hosts，将"),a("code",[s._v("服务端域名")]),s._v("转到本地"),a("code",[s._v("127.0.0.1")])]),s._v(" "),a("li",[s._v("修改"),a("strong",[s._v("Nginx配置")]),s._v("，转到线上")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("upstream local {\n    # 监听端口\n    server 127.0.0.1:8080;\n}\n\nupstream online1 {\n    # 线上ip\n    server 31.101.360.155:443;\n}\n\n\n# 转发到xx环境\nserver {\n    listen       80;\n    listen       443 ssl;\n    server_name  www.baidu.com;\n\n    ssl_certificate      server.crt;\n    ssl_certificate_key  server_nopwd.key;\n\n    # 接口代理\n    location ~ /(we)?api {\n        proxy_set_header Host $http_host;\n        # 【注意】此处协议(http?https?)需要检查\n        proxy_pass https://online1;\n    }\n\n    # 静态资源代理\n    location ~ ^/ {\n        proxy_pass http://local;\n        proxy_set_header Host $http_host;\n    }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("p",[s._v("配置好Nginx之后，就可以解决跨域问题，从而直接通过"),a("code",[s._v("www.baidu.com")]),s._v("访问了")]),s._v(" "),a("h2",{attrs:{id:"其他注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他注意"}},[s._v("#")]),s._v(" 其他注意")]),s._v(" "),a("p",[s._v("执行"),a("code",[s._v("npm run build")]),s._v("后，原dist文件可能会被删。需要重新"),a("code",[s._v("cd")]),s._v("进入，再执行"),a("code",[s._v("http-server")]),s._v("。")])])}),[],!1,null,null,null);n.default=e.exports}}]);