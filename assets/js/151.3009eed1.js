(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{591:function(t,v,_){"use strict";_.r(v);var a=_(29),e=Object(a.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"web-vitals"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#web-vitals"}},[t._v("#")]),t._v(" Web Vitals")]),t._v(" "),_("blockquote",[_("p",[t._v("Web Vitals是谷歌提出的一组用来衡量 用户体验 的度量指标集。")])]),t._v(" "),_("p"),_("div",{staticClass:"table-of-contents"},[_("ul",[_("li",[_("a",{attrs:{href:"#web-vitals"}},[t._v("Web Vitals")]),_("ul",[_("li",[_("a",{attrs:{href:"#指标集概览"}},[t._v("指标集概览")])]),_("li",[_("a",{attrs:{href:"#lcp"}},[t._v("LCP")])]),_("li",[_("a",{attrs:{href:"#fid"}},[t._v("FID")])]),_("li",[_("a",{attrs:{href:"#cls"}},[t._v("CLS")])]),_("li",[_("a",{attrs:{href:"#测量工具"}},[t._v("测量工具")])]),_("li",[_("a",{attrs:{href:"#优化步骤"}},[t._v("优化步骤")])])])])])]),_("p"),t._v(" "),_("h2",{attrs:{id:"指标集概览"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#指标集概览"}},[t._v("#")]),t._v(" 指标集概览")]),t._v(" "),_("p",[t._v("核心指标：")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("LCP（Largest Contentful Paint）")])]),t._v(" "),_("li",[_("strong",[t._v("FID（First Input Delay）")])]),t._v(" "),_("li",[_("strong",[t._v("CLS（Cumulative Layout Shift）")])])]),t._v(" "),_("blockquote",[_("p",[t._v("其它非核心指标：FCP（FirstContentful）、TTFB（Time to First Bytes）、TBT（Total Blocking Time）、TTI（Time to Interactive）")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://p5.music.126.net/obj/wo3DlcOGw6DClTvDisK1/5300348259/03ed/c3f4/0ee6/4dbce51aa76973c8f2dceeca5d00324d.png",alt:"alt"}})]),t._v(" "),_("h2",{attrs:{id:"lcp"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#lcp"}},[t._v("#")]),t._v(" LCP")]),t._v(" "),_("p",[t._v("LCP是"),_("strong",[t._v("最大内容渲染")]),t._v("。")]),t._v(" "),_("p",[t._v("指的是"),_("strong",[t._v("当前视窗（viewport）中的最大内容元素的渲染时间。")])]),t._v(" "),_("blockquote",[_("p",[t._v("用来衡量“加载时性能（Loading）”")])]),t._v(" "),_("h3",{attrs:{id:"判定的元素"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#判定的元素"}},[t._v("#")]),t._v(" 判定的元素")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("<img>")])]),t._v(" "),_("li",[_("code",[t._v("<video>(带poster)")])]),t._v(" "),_("li",[_("code",[t._v("background-image: url()")])]),t._v(" "),_("li",[_("code",[t._v("<svg:image>")])]),t._v(" "),_("li",[_("code",[t._v("Block-Level element(containing text node)")]),t._v("（一大块文字）")])]),t._v(" "),_("h3",{attrs:{id:"元素的大小"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#元素的大小"}},[t._v("#")]),t._v(" 元素的大小")]),t._v(" "),_("p",[t._v("如果一张 图片本身像素 和 渲染像素 不同，会取最小值。")]),t._v(" "),_("h3",{attrs:{id:"影响因素-优化思路"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#影响因素-优化思路"}},[t._v("#")]),t._v(" 影响因素 & 优化思路")]),t._v(" "),_("ol",[_("li",[t._v("请求html时的服务器响应时间")]),t._v(" "),_("li",[t._v("阻塞渲染的CSS、JavaScript")]),t._v(" "),_("li",[t._v("资源加载时间")]),t._v(" "),_("li",[t._v("客户端渲染（Client-side rending）")])]),t._v(" "),_("h2",{attrs:{id:"fid"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#fid"}},[t._v("#")]),t._v(" FID")]),t._v(" "),_("p",[t._v("FID指的是"),_("strong",[t._v("用户首次输入事件的延迟")]),t._v("（注意是"),_("strong",[t._v("首次")]),t._v("）。")]),t._v(" "),_("blockquote",[_("p",[t._v("用来衡量“可交互性（Interactivity）”")])]),t._v(" "),_("h3",{attrs:{id:"判定范围"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#判定范围"}},[t._v("#")]),t._v(" 判定范围")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("click")])]),t._v(" "),_("li",[_("code",[t._v("tap")])]),t._v(" "),_("li",[_("code",[t._v("key press")])])]),t._v(" "),_("p",[t._v("不依赖事件处理器，但需要主线程空闲的"),_("strong",[t._v("也算")]),t._v("：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("checkbox")])]),t._v(" "),_("li",[_("code",[t._v("radio")])]),t._v(" "),_("li",[_("code",[t._v("select")])]),t._v(" "),_("li",[_("code",[t._v("text")])]),t._v(" "),_("li",[_("code",[t._v("link")])])]),t._v(" "),_("blockquote",[_("p",[t._v("不算："),_("code",[t._v("scrolling")]),t._v("、"),_("code",[t._v("zooming")])])]),t._v(" "),_("h3",{attrs:{id:"影响因素-优化思路-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#影响因素-优化思路-2"}},[t._v("#")]),t._v(" 影响因素 & 优化思路")]),t._v(" "),_("p",[_("strong",[t._v("影响因素：")])]),t._v(" "),_("p",[t._v("解析、执行了太重的JavaScript，导致主线程繁忙。")]),t._v(" "),_("p",[_("strong",[t._v("优化思路：")])]),t._v(" "),_("ol",[_("li",[t._v("减少JS文件体积（Code-splitting、延迟加载）")]),t._v(" "),_("li",[t._v("减少主线程执行开销（拆分Long Tasks、异步执行、web worker）")])]),t._v(" "),_("h2",{attrs:{id:"cls"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cls"}},[t._v("#")]),t._v(" CLS")]),t._v(" "),_("p",[t._v("CLS指的是"),_("strong",[t._v("累积页面布局偏移")]),t._v("。")]),t._v(" "),_("blockquote",[_("p",[t._v("用来衡量“视觉稳定性（Visual Stability）”")])]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("布局位移评分 = 影响面积分数 * 距离分数\n\n# “影响面积分数” = （移动前 U 移动后） / 视窗面积\n# “距离分数” = 移动的最大距离 / 视窗的长边\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br")])]),_("h3",{attrs:{id:"影响因素-优化思路-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#影响因素-优化思路-3"}},[t._v("#")]),t._v(" 影响因素 & 优化思路")]),t._v(" "),_("ol",[_("li",[t._v("添加元素大小属性（width、height）")]),t._v(" "),_("li",[t._v("不要在已有内容上方插入新的内容")]),t._v(" "),_("li",[t._v("使用不影响布局的动画（transform、animation）")]),t._v(" "),_("li",[t._v("可以适当选择绝对定位")])]),t._v(" "),_("h2",{attrs:{id:"测量工具"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#测量工具"}},[t._v("#")]),t._v(" 测量工具")]),t._v(" "),_("ul",[_("li",[t._v("Chrome Devtools-Performance\n"),_("ul",[_("li",[t._v("LCP、CLS、Longtask、TBT（Total blocking time）")])])]),t._v(" "),_("li",[t._v("Chrome Devtools-Lighthouse")]),t._v(" "),_("li",[t._v("Chrome插件：Web Vitals")]),t._v(" "),_("li",[t._v("Npm包：web-vitals\n"),_("ul",[_("li",[t._v("在项目内导出并执行getCLS、getFID、getLCP")])])])]),t._v(" "),_("h2",{attrs:{id:"优化步骤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优化步骤"}},[t._v("#")]),t._v(" 优化步骤")]),t._v(" "),_("p",[t._v("“线上真实数据”、“Lighthouse”、“devtools”三者的关系")]),t._v(" "),_("ol",[_("li",[t._v("通过 "),_("strong",[t._v("线上真实数据")]),t._v(" 发现不合格的体验问题")]),t._v(" "),_("li",[t._v("使用 "),_("strong",[t._v("Lighthouse")]),t._v(" 工具诊断，根据优化建议进行优化")]),t._v(" "),_("li",[t._v("结合 "),_("strong",[t._v("devtools")]),t._v(" 等工具进行优化")]),t._v(" "),_("li",[t._v("使用 "),_("strong",[t._v("Lighthouse")]),t._v(" 验证改进效果")]),t._v(" "),_("li",[t._v("通过 "),_("strong",[t._v("线上真实数据")]),t._v(" 验证改进结果")])])])}),[],!1,null,null,null);v.default=e.exports}}]);