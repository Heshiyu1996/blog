(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{384:function(t,s){t.exports="data:image/png;base64,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"},385:function(t,s,a){t.exports=a.p+"assets/img/img-3.d74bbacd.png"},386:function(t,s,a){t.exports=a.p+"assets/img/img-4.7ec50ae1.png"},387:function(t,s,a){t.exports=a.p+"assets/img/img-5.d2de4246.png"},388:function(t,s,a){t.exports=a.p+"assets/img/img-6.fdbaa388.png"},571:function(t,s,a){"use strict";a.r(s);var n=a(29),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"vue基础知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue基础知识"}},[t._v("#")]),t._v(" Vue基础知识")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#vue基础知识"}},[t._v("Vue基础知识")]),n("ul",[n("li",[n("a",{attrs:{href:"#什么是mvvm"}},[t._v("什么是MVVM？")])]),n("li",[n("a",{attrs:{href:"#数据双向绑定"}},[t._v("数据双向绑定")])]),n("li",[n("a",{attrs:{href:"#vue-vs-react"}},[t._v("Vue VS React")])]),n("li",[n("a",{attrs:{href:"#参考链接"}},[t._v("参考链接")])]),n("li",[n("a",{attrs:{href:"#observer、dep、watcher源码"}},[t._v("Observer、Dep、Watcher源码")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"什么是mvvm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是mvvm"}},[t._v("#")]),t._v(" 什么是MVVM？")]),t._v(" "),n("p",[n("code",[t._v("M")]),t._v("：Model层，代表 "),n("strong",[t._v("模型、数据")]),t._v("。负责数据修改、操作的业务逻辑")]),t._v(" "),n("p",[n("code",[t._v("V")]),t._v("：View层，代表 "),n("strong",[t._v("视图、模板")]),t._v("。负责将数据模型转化UI展现出来")]),t._v(" "),n("p",[n("code",[t._v("VM")]),t._v("：ViewModel层，将 "),n("code",[t._v("View")]),t._v(" 和 "),n("code",[t._v("Model")]),t._v(" 连接起来")]),t._v(" "),n("ul",[n("li",[t._v("将 Model层 的数据"),n("code",[t._v("同步")]),t._v("到 View层 ，进行渲染")]),t._v(" "),n("li",[t._v("将 View层 的修改"),n("code",[t._v("同步")]),t._v("到 Model层 ，进行存储")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(384),alt:"alt"}})]),t._v(" "),n("p",[n("strong",[t._v("Vue框架充当了MVVM开发模式中的 "),n("code",[t._v("ViewModel")]),t._v(" 层，负责 "),n("code",[t._v("View")]),t._v(" 和 "),n("code",[t._v("Model")]),t._v(" 之间通信的桥梁。")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(385),alt:"alt"}})]),t._v(" "),n("h3",{attrs:{id:"mvvm的实现原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvvm的实现原理"}},[t._v("#")]),t._v(" MVVM的实现原理")]),t._v(" "),n("p",[t._v("如何监听JS对象属性发生了变更？")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Vue.js")]),t._v(" 通过 "),n("strong",[t._v("数据劫持")]),t._v("、"),n("strong",[t._v("发布订阅")]),t._v("。")])]),t._v(" "),n("blockquote",[n("p",[t._v("当数据变动时，数据会触发劫持时绑定的方法，对视图进行更新。")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Angular.js")]),t._v("/"),n("code",[t._v("RegularJS")]),t._v(" 通过 "),n("strong",[t._v("脏检查")]),t._v("。")])]),t._v(" "),n("blockquote",[n("p",[t._v("在各种可能引发状态变更的事件后，启动一次脏检查，来决定是否更新视图。（数据模型本身无状态）")])]),t._v(" "),n("p",[n("strong",[t._v("数据劫持")]),t._v("、"),n("strong",[t._v("脏检查")]),t._v(" 的相同点：")]),t._v(" "),n("ul",[n("li",[t._v("解析模板")]),t._v(" "),n("li",[t._v("解析数据")]),t._v(" "),n("li",[t._v("绑定模板与数据")])]),t._v(" "),n("h2",{attrs:{id:"数据双向绑定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据双向绑定"}},[t._v("#")]),t._v(" 数据双向绑定")]),t._v(" "),n("p",[n("img",{attrs:{src:a(386),alt:"alt"}})]),t._v(" "),n("p",[n("code",[t._v("Vue")]),t._v("是通过 "),n("strong",[t._v("数据劫持")]),t._v(" + "),n("strong",[t._v("发布订阅")]),t._v(" 来实现 "),n("strong",[t._v("数据双向绑定")]),t._v(" 的。")]),t._v(" "),n("p",[t._v("在 "),n("strong",[t._v("初始化Vue实例")]),t._v(" 的 "),n("code",[t._v("initState")]),t._v("过程中，会对传入的 "),n("code",[t._v("data")]),t._v(" 进行属性遍历。为每个属性，都通过 "),n("code",[t._v("Object.defineProperty")]),t._v(" 改造它们的 "),n("code",[t._v("getter")]),t._v("、 "),n("code",[t._v("setter")]),t._v(" 方法（"),n("strong",[t._v("数据劫持")]),t._v(" ）。对于每一个响应式属性，会绑定一个 "),n("code",[t._v("dep")]),t._v(" 订阅器（"),n("strong",[t._v("发布订阅")]),t._v(" ），负责：")]),t._v(" "),n("ul",[n("li",[t._v("在 "),n("code",[t._v("getter")]),t._v(" 时的 "),n("strong",[t._v("依赖收集")])]),t._v(" "),n("li",[t._v("在 "),n("code",[t._v("setter")]),t._v(" 时的 "),n("strong",[t._v("发布通知")])])]),t._v(" "),n("blockquote",[n("p",[t._v("1、如果 "),n("code",[t._v("data[key]")]),t._v(" 是对象，进行深度劫持）")]),t._v(" "),n("p",[t._v("2、其中的 "),n("strong",[t._v("订阅者")]),t._v(" 指的是一个个 "),n("code",[t._v("watcher")]),t._v(" 实例。")])]),t._v(" "),n("h4",{attrs:{id:"订阅者watcher"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#订阅者watcher"}},[t._v("#")]),t._v(" 订阅者watcher")]),t._v(" "),n("p",[t._v("模板中每个指令（"),n("code",[t._v('v-model="name"')]),t._v("）、数据绑定（"),n("code",[t._v("{ { name } }")]),t._v("）都会对应一个 "),n("code",[t._v("watcher")]),t._v(" 对象。在模板的编译计算过程中，响应式属性（这里为 "),n("code",[t._v("name")]),t._v(" ）会通过 "),n("strong",[t._v("getter依赖收集")]),t._v(" 将它（这里为"),n("code",[t._v("watcher")]),t._v("）记录为依赖。")]),t._v(" "),n("p",[t._v("当响应式属性（这里为"),n("code",[t._v("name")]),t._v("）的 "),n("strong",[t._v("setter发布更新")]),t._v(" 被调用时，会触发它依赖列表中的 "),n("code",[t._v("watcher")]),t._v(" 的重新计算（"),n("code",[t._v("watcher.update()")]),t._v("），也就会导致它的关联指令去更新DOM。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(387),alt:"alt"}})]),t._v(" "),n("h3",{attrs:{id:"依赖收集"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖收集"}},[t._v("#")]),t._v(" 依赖收集")]),t._v(" "),n("p",[n("code",[t._v("依赖收集")]),t._v(" 发生在响应式属性的 "),n("code",[t._v("getter")]),t._v(" 阶段，但不是每次 "),n("code",[t._v("getter")]),t._v(" 都会收集依赖，会通过 "),n("code",[t._v("Dep.target")]),t._v(" 来区分。")]),t._v(" "),n("blockquote",[n("p",[t._v("若 "),n("code",[t._v("Dep.target")]),t._v("有值，说明是Vue内部依赖收集过程触发的，需先收集依赖"),n("code",[t._v("this.dep.depend()")]),t._v("，再返回value；否则直接返回value即可。")])]),t._v(" "),n("blockquote",[n("p",[t._v("为什么要用Dep.target代表Watcher实例？答：因为getter函数不能传参")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dep")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("depend")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Dep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addDep")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("h3",{attrs:{id:"异步更新队列"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#异步更新队列"}},[t._v("#")]),t._v(" 异步更新队列")]),t._v(" "),n("p",[t._v("Vue在更新 DOM 时是 "),n("strong",[t._v("异步")]),t._v(" 执行的。只要监听到数据变化，Vue将开启一个队列，并缓冲 "),n("strong",[t._v("在本次事件循环")]),t._v(" 中发生的所有数据变更。目的是为了"),n("strong",[t._v("避免不必要的计算和DOM操作")]),t._v("。")]),t._v(" "),n("p",[t._v("然后在 "),n("strong",[t._v("下次事件循环（tick）")]),t._v(" 中，"),n("code",[t._v("Vue")]),t._v("会刷新队列，并执行更新。")]),t._v(" "),n("p",[n("code",[t._v("Vue.nextTick(callback)")]),t._v("的回调函数，会 "),n("strong",[t._v("在 "),n("code",[t._v("Vue")]),t._v(" 完成DOM更新后")]),t._v(" 立即执行。")]),t._v(" "),n("h2",{attrs:{id:"vue-vs-react"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-vs-react"}},[t._v("#")]),t._v(" Vue VS React")]),t._v(" "),n("p",[n("strong",[t._v("相同：")])]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("Virtual DOM")])]),t._v(" "),n("li",[n("strong",[t._v("组件化")]),t._v(" "),n("ul",[n("li",[t._v("组件内部执行"),n("code",[t._v("render")]),t._v(" -> VNode树 -> Diff -> 真实DOM")])])]),t._v(" "),n("li",[n("strong",[t._v("推崇“单向数据流”")]),t._v(" "),n("ul",[n("li",[t._v("父组件传入数据给子组件，子组件不能直接修改父组件传过来的props")])])])]),t._v(" "),n("p",[n("strong",[t._v("不同：")])]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("核心思想")]),t._v(" "),n("ul",[n("li",[t._v("React：函数式编程、推崇JSX、组件复用HOC/Hooks")]),t._v(" "),n("li",[t._v("Vue：双向绑定、推崇template、组件复用Mixin、单文件.vue")])])]),t._v(" "),n("li",[n("strong",[t._v("组件的实现方式")]),t._v(" "),n("ul",[n("li",[t._v("React：React.Component类、函数式组件返回的React元素；传入"),n("code",[t._v("ReactDOM.render()")]),t._v("去渲染")]),t._v(" "),n("li",[t._v("Vue：options对象声明，实例化"),n("code",[t._v("new Vue()")]),t._v("，内部方法"),n("code",[t._v("initState")]),t._v("等")])])]),t._v(" "),n("li",[n("strong",[t._v("Diff算法")]),t._v(" "),n("ul",[n("li",[t._v("React：三个策略、三种细粒度Diff；从根组件重新渲染整棵树")]),t._v(" "),n("li",[t._v("Vue：五种情况、四次比较、根据Key值查找匹配对象；更细粒度更新")])])])]),t._v(" "),n("h2",{attrs:{id:"参考链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://blog.csdn.net/shaleilei/article/details/78084171",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么在vue的组件中，data要用function返回对象呢？"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5b2f0769e51d45589f46949e",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue.js中的MVVM"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/Ma63d/vue-analysis/issues/1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue源码详细解析(一)--数据的响应化"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.jianshu.com/p/ac3e97365dc5",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue双向绑定原理简析(数据劫持+发布订阅)"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"observer、dep、watcher源码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#observer、dep、watcher源码"}},[t._v("#")]),t._v(" Observer、Dep、Watcher源码")]),t._v(" "),n("h3",{attrs:{id:"observer监听器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#observer监听器"}},[t._v("#")]),t._v(" Observer监听器")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Observer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 遍历walk中所有的数据,劫持 set 和 get方法")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断data 不存在或者不是对象的情况")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拿到data中所有的属性")]),t._v("\n        Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("key")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给data中的属性添加 getter和 setter方法")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineReactive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果data[key]是对象,深度劫持")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义响应式数据")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineReactive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" _this "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" dep "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dep")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Dep函数请看下节实现")]),t._v("\n        Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            enumerable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            configurable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果Dep.target 中有watcher 对象,则存储到订阅者数组中")]),t._v("\n                Dep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" dep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSub")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Dep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" newVal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n                value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果设置的值是一个对象,那么这个对象也应该是响应式的")]),t._v("\n                _this"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发布通知,让所有订阅者更新内容")]),t._v("\n                dep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("notify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br")])]),n("h3",{attrs:{id:"dep订阅器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dep订阅器"}},[t._v("#")]),t._v(" Dep订阅器")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dep")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用来存储订阅者")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加订阅者")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSub")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("watcher")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("watcher"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通知订阅者")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("notify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通知所有订阅者更新视图")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("sub")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            sub"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])]),n("h3",{attrs:{id:"watcher订阅者"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#watcher订阅者"}},[t._v("#")]),t._v(" Watcher订阅者")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Watcher")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * \n     * @param {*} vm 当前的vue实例 \n     * @param {*} expr data中数据的名字\n     * @param {*} callback  一旦数据改变,则需要调用callback\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("expr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vm "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vm\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" expr \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callback "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback\n        Dep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局变量 订阅者 赋值")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oldValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getVMData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("expr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 强制执行监听器Observer里的get函数")]),t._v("\n        Dep"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//全局变量 订阅者 释放")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对外暴露的方法,用于更新页面")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对比expr是否发生改变,如果改变则调用callback")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oldValue\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getVMData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 变化的时候调用callback")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldValue "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" newValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getVMData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("expr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$data\n        expr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("key")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" data\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br")])]),n("h3",{attrs:{id:"稍微了解mvc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#稍微了解mvc"}},[t._v("#")]),t._v(" 稍微了解MVC")]),t._v(" "),n("p",[n("img",{attrs:{src:a(388),alt:"alt"}})]),t._v(" "),n("p",[n("code",[t._v("M")]),t._v("指的是Model层")]),t._v(" "),n("ul",[n("li",[t._v("用于封装和业务逻辑相关的数据、以及对数据处理的方法")])]),t._v(" "),n("p",[n("code",[t._v("V")]),t._v("指的是View层")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("监听模型层上的数据改变")]),t._v("，并实时更新页面")])]),t._v(" "),n("p",[n("code",[t._v("C")]),t._v("指的是Controller层")]),t._v(" "),n("ul",[n("li",[t._v("负责接收用户的操作，然后调用模型或视图去完成用户的操作")])]),t._v(" "),n("p",[n("strong",[t._v("本质：")]),t._v(" 将 "),n("strong",[t._v("数据展示")]),t._v(" 和 "),n("strong",[t._v("数据")]),t._v(" 进行隔离，提高代码的复用性和扩展性；")]),t._v(" "),n("p",[n("strong",[t._v("特点：")]),t._v(" 职责明确、相互分离；")]),t._v(" "),n("p",[n("strong",[t._v("和 MVVM 的区别：")]),t._v(" MCV耦合度较高。因为MVVM简化了View、Model的依赖，也解决了数据频繁更新的问题，不必再用选择器去操作DOM。")])])}),[],!1,null,null,null);s.default=e.exports}}]);