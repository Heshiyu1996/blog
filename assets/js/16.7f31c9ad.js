(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{433:function(t,s,a){t.exports=a.p+"assets/img/web-storage-1.bdb143f6.png"},434:function(t,s,a){t.exports=a.p+"assets/img/web-storage-2.ce82a6c7.png"},435:function(t,s,a){t.exports=a.p+"assets/img/web-storage-3.4522fb81.png"},436:function(t,s,a){t.exports=a.p+"assets/img/web-storage-4.c3297188.png"},437:function(t,s,a){t.exports=a.p+"assets/img/web-storage-5.895484fc.png"},590:function(t,s,a){"use strict";a.r(s);var e=a(29),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"webstorage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webstorage"}},[t._v("#")]),t._v(" WebStorage")]),t._v(" "),e("blockquote",[e("p",[t._v("平时我们讲的HTML 5本地存储，多指的是web Storage")])]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#webstorage"}},[t._v("WebStorage")]),e("ul",[e("li",[e("a",{attrs:{href:"#localstorage"}},[t._v("localStorage")])]),e("li",[e("a",{attrs:{href:"#sessionstorage"}},[t._v("sessionStorage")])]),e("li",[e("a",{attrs:{href:"#cookie"}},[t._v("cookie")])]),e("li",[e("a",{attrs:{href:"#localstorage、sessionstorage、cookie的区别"}},[t._v("localStorage、sessionStorage、cookie的区别")])]),e("li",[e("a",{attrs:{href:"#同源的规则判断"}},[t._v("同源的规则判断")])]),e("li",[e("a",{attrs:{href:"#图示"}},[t._v("图示")])]),e("li",[e("a",{attrs:{href:"#cookie和session的区别"}},[t._v("cookie和session的区别")])]),e("li",[e("a",{attrs:{href:"#cookie的属性"}},[t._v("cookie的属性")])])])])])]),e("p"),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("API")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("setItem")]),t._v("(key, value)\n"),e("ul",[e("li",[t._v("保存数据")])])]),t._v(" "),e("li",[e("strong",[t._v("getItem")]),t._v("(key)\n"),e("ul",[e("li",[t._v("获取数据")])])]),t._v(" "),e("li",[e("strong",[t._v("removeItem")]),t._v("(key)\n"),e("ul",[e("li",[t._v("删除单个数据")])])]),t._v(" "),e("li",[e("strong",[t._v("clear")]),t._v("( )\n"),e("ul",[e("li",[t._v("删除所有数据")])])])])]),t._v(" "),e("h2",{attrs:{id:"localstorage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[t._v("#")]),t._v(" localStorage")]),t._v(" "),e("h4",{attrs:{id:"生命周期-永久。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期-永久。"}},[t._v("#")]),t._v(" 生命周期：永久。")]),t._v(" "),e("p",[t._v("即使"),e("strong",[t._v("关闭浏览器，也不会让数据消失")]),t._v("（除非主动删除数据）")]),t._v(" "),e("h4",{attrs:{id:"大小-5mb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#大小-5mb"}},[t._v("#")]),t._v(" 大小：5MB")]),t._v(" "),e("h4",{attrs:{id:"用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("localStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'heshiyu'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlocalStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'heshiyu'")]),t._v("\nlocalStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlocalStorage"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h2",{attrs:{id:"sessionstorage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[t._v("#")]),t._v(" sessionStorage")]),t._v(" "),e("h4",{attrs:{id:"生命周期-浏览器关闭前。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期-浏览器关闭前。"}},[t._v("#")]),t._v(" 生命周期：浏览器关闭前。")]),t._v(" "),e("p",[t._v("即在整个浏览器"),e("strong",[t._v("未关闭前，其数据都是一直存在")]),t._v("的。")]),t._v(" "),e("h4",{attrs:{id:"大小-5mb。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#大小-5mb。"}},[t._v("#")]),t._v(" 大小：5MB。")]),t._v(" "),e("h4",{attrs:{id:"用法-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法-2"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),e("p",[t._v("和localStorage类似")]),t._v(" "),e("h4",{attrs:{id:"特殊之处"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊之处"}},[t._v("#")]),t._v(" 特殊之处")]),t._v(" "),e("ul",[e("li",[t._v("同一个浏览器、不同的Tab的sessionStorage各自独立（详见下方图示）")]),t._v(" "),e("li",[t._v("同一Tab下的同源页面（即多个iframe）可以访问同一个sessionStorage")]),t._v(" "),e("li",[t._v("页面刷新不会删除数据")])]),t._v(" "),e("h2",{attrs:{id:"cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" cookie")]),t._v(" "),e("p",[t._v("每次HTTP请求都会携带。\n就算窗口或浏览器关闭，只要在设置的cookie过期时间内，都一直有效。")]),t._v(" "),e("h4",{attrs:{id:"生命周期-设置的过期时间内都有效。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期-设置的过期时间内都有效。"}},[t._v("#")]),t._v(" 生命周期：设置的过期时间内都有效。")]),t._v(" "),e("h4",{attrs:{id:"大小-每个4kb-且一般不能超过20个"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#大小-每个4kb-且一般不能超过20个"}},[t._v("#")]),t._v(" 大小：每个4KB，且一般不能超过20个")]),t._v(" "),e("h4",{attrs:{id:"用法-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法-3"}},[t._v("#")]),t._v(" 用法")]),t._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置cookie（请求头中的Expires可以设置有效期，0或者负数表示：关闭页面马上清除Cookie）")]),t._v("\ndocument"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name='")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" myName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("';age='")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" myAge "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'expires='")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" exp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toGTMString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取cookie")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 然后按照需要，找到指定的key来分割")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 假设cookie的内容为：name=heshiyu;age=22;expires=Thu, 18 Dec 2043 12:00:00 GMT")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" getName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("';'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'='")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改cookie 类似于创建cookie")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除cookie 只需设置expires的时间为“已过期的时间”即可（此时浏览器关闭时会删除）")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])]),e("h2",{attrs:{id:"localstorage、sessionstorage、cookie的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#localstorage、sessionstorage、cookie的区别"}},[t._v("#")]),t._v(" localStorage、sessionStorage、cookie的区别")]),t._v(" "),e("h4",{attrs:{id:"共同点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#共同点"}},[t._v("#")]),t._v(" 共同点：")]),t._v(" "),e("ul",[e("li",[t._v("都是保存在浏览器端、且同源（是按url归类）的")]),t._v(" "),e("li",[t._v("均只能存储字符串类型")])]),t._v(" "),e("h4",{attrs:{id:"区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[t._v("#")]),t._v(" 区别：")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("【大小】")]),t._v(" cookie大小不超过4KB（只适合保存很小的数据，如会话标识）；sessionStorage和localStorage有5MB或更大；")]),t._v(" "),e("li",[e("strong",[t._v("【发送方式】")]),t._v(" "),e("ul",[e("li",[t._v("cookie数据始终在同源的http请求中携带（即使用不到）；")]),t._v(" "),e("li",[t._v("sessionStorage和localStorage不会自动把数据发送给服务器；")])])]),t._v(" "),e("li",[e("strong",[t._v("【有效期】")]),t._v(" "),e("ul",[e("li",[t._v("localStorage：始终有效；")]),t._v(" "),e("li",[t._v("sessionStorage：尽在当前浏览器窗口关闭前有效；")]),t._v(" "),e("li",[t._v("cookie：在过期时间前都有效（即使浏览器窗口关闭也不影响）；")])])]),t._v(" "),e("li",[e("strong",[t._v("【作用域】")]),t._v(" （具体图示见下方）\n"),e("ul",[e("li",[t._v("localStorage：同源、不同窗口，都可以共享；"),e("a",{attrs:{href:"#%E5%9B%BE%E7%A4%BA"}},[t._v("图示")])]),t._v(" "),e("li",[t._v("sessionStorage：仅单个窗口内，可以共享；"),e("a",{attrs:{href:"#%E5%9B%BE%E7%A4%BA"}},[t._v("图示")])]),t._v(" "),e("li",[t._v("同一标签页、带有多个属于同源页面iframe，这些iframe的sessionStorage可以共享")])])]),t._v(" "),e("li",[e("strong",[t._v("【指定路径】")]),t._v(" cookie有路径（path）概念，可以限制cookie只属于某个路径下")])]),t._v(" "),e("h2",{attrs:{id:"同源的规则判断"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#同源的规则判断"}},[t._v("#")]),t._v(" 同源的规则判断")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("http://www.test.com\n\nhttp://www.test.com:8080（不同源：端口不同）\n\nhttps://www.test.com（不同源：协议不同）\n\nhttp://my.test.com（不同源：主机名不同）\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br")])]),e("h2",{attrs:{id:"图示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图示"}},[t._v("#")]),t._v(" 图示")]),t._v(" "),e("h4",{attrs:{id:"localstorage-同源、不同窗口-都可以共享"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#localstorage-同源、不同窗口-都可以共享"}},[t._v("#")]),t._v(" localStorage：同源、不同窗口，都可以共享")]),t._v(" "),e("p",[e("img",{attrs:{src:a(433),alt:"alt"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(434),alt:"alt"}})]),t._v(" "),e("h4",{attrs:{id:"sessionstorage-仅单个窗口内-可以共享"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage-仅单个窗口内-可以共享"}},[t._v("#")]),t._v(" sessionStorage：仅单个窗口内，可以共享")]),t._v(" "),e("p",[e("img",{attrs:{src:a(435),alt:"alt"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(436),alt:"alt"}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(437),alt:"alt"}})]),t._v(" "),e("h2",{attrs:{id:"cookie和session的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie和session的区别"}},[t._v("#")]),t._v(" cookie和session的区别")]),t._v(" "),e("p",[e("code",[t._v("cookie")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("保存在客户端")]),t._v("的小文本")]),t._v(" "),e("li",[t._v("可保存sessionID")]),t._v(" "),e("li",[t._v("不安全")])]),t._v(" "),e("p",[e("code",[t._v("session")])]),t._v(" "),e("ul",[e("li",[e("code",[t._v("保存在服务端")]),t._v("的有关浏览器会话的信息")]),t._v(" "),e("li",[t._v("运行依赖sessionID\n"),e("ul",[e("li",[t._v("创建前，服务端会先检查请求头的cookie里是否包含 "),e("strong",[t._v("sessionID")]),t._v("。若有，且未过期，则直接用旧的")])])]),t._v(" "),e("li",[t._v("有失效时间")]),t._v(" "),e("li",[t._v("安全")])]),t._v(" "),e("p",[t._v("一句话："),e("code",[t._v("session")]),t._v("的使用一般需要借助"),e("code",[t._v("cookie")]),t._v("来发送"),e("code",[t._v("sessionID")])]),t._v(" "),e("h2",{attrs:{id:"cookie的属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie的属性"}},[t._v("#")]),t._v(" cookie的属性")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("作用")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("name")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("名称")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("value")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("值")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Domain")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("可以访问此cookie的域名")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("path")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("可以访问此cookie的路径")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Size")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("大小")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Http Only")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("不能通过document.cookie来访问此cookie")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("secure")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否只能通过https来传递此cookie")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("Expires / Max-Age")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("超时时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("SameSite")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("跨站点时，能否传递此cookie "),e("strong",[t._v("（预防CSRF）")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);