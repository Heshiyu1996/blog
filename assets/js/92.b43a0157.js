(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{611:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"babel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[s._v("#")]),s._v(" Babel")]),s._v(" "),a("blockquote",[a("p",[s._v("在项目中我们用到Babel的原因：")]),s._v(" "),a("p",[s._v("1、【语法转译】利用 "),a("code",[s._v("presets")]),s._v(" 进行转译：ES6新语法（箭头函数、扩展运算符）、JSX语法；")]),s._v(" "),a("p",[s._v("2、【API实现】利用 "),a("code",[s._v("plugins")]),s._v("（"),a("code",[s._v("babel-polyfill")]),s._v("） 进行实现：比如：Array的includes、Promise（通过旧API）")])]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#babel"}},[s._v("Babel")]),a("ul",[a("li",[a("a",{attrs:{href:"#基本工作原理"}},[s._v("基本工作原理")])]),a("li",[a("a",{attrs:{href:"#plugins"}},[s._v("plugins")])]),a("li",[a("a",{attrs:{href:"#参考链接"}},[s._v("参考链接")])])])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"基本工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本工作原理"}},[s._v("#")]),s._v(" 基本工作原理")]),s._v(" "),a("p",[s._v("（以“将ES6转换成ES5”为例）：")]),s._v(" "),a("p",[a("code",[s._v("Babel")]),s._v("是一个转译器，它的原理分三个部分：")]),s._v(" "),a("ul",[a("li",[s._v("解析（parsing）\n"),a("ul",[a("li",[s._v("把ES6代码生成AST")])])]),s._v(" "),a("li",[s._v("转译（transforming）\n"),a("ul",[a("li",[s._v("把AST遍历，优化成新的AST")])])]),s._v(" "),a("li",[s._v("生成（generating）\n"),a("ul",[a("li",[s._v("按照新的AST生成ES5代码")])])])]),s._v(" "),a("h2",{attrs:{id:"plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[s._v("#")]),s._v(" plugins")]),s._v(" "),a("p",[a("code",[s._v("plugins")]),s._v("应用于整个过程（尤其是"),a("code",[s._v("transforming")]),s._v("）的插件。")]),s._v(" "),a("p",[a("code",[s._v("presets")]),s._v("是一些预设的插件集。")]),s._v(" "),a("blockquote",[a("p",[s._v("关系："),a("code",[s._v("presets")]),s._v("实际上是一堆插件（"),a("code",[s._v("plugins")]),s._v("）的集合。")])]),s._v(" "),a("h3",{attrs:{id:"常用的presets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用的presets"}},[s._v("#")]),s._v(" 常用的presets")]),s._v(" "),a("h4",{attrs:{id:"babel-preset-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-preset-env"}},[s._v("#")]),s._v(" @babel/preset-env")]),s._v(" "),a("p",[s._v("作用："),a("strong",[s._v("转译【新语法】")]),s._v("。")]),s._v(" "),a("blockquote",[a("p",[s._v("如：箭头函数、Class、扩展运算符（...）")])]),s._v(" "),a("p",[s._v("它包含了以下 "),a("strong",[s._v("转译插件")]),s._v("：")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("transform-arrow-functions {}")]),s._v(" "),a("p",[s._v("transform-classes {}")]),s._v(" "),a("p",[s._v("// ...")])]),s._v(" "),a("p",[s._v("一般我们会赋予 "),a("code",[s._v("@babel/preset-env")]),s._v(" 配置项：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 指定将es6 modules转换为哪种模块规范")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// 可配置项： "auto"（默认） | "amd" | "umd" | "systemjs" | "commonjs" | "cjs" | false')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// false则表示：将module交由webpack处理，而不是babel。")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h4",{attrs:{id:"babel-preset-react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-preset-react"}},[s._v("#")]),s._v(" @babel/preset-react")]),s._v(" "),a("p",[s._v("作用："),a("strong",[s._v("识别并转换JSX语法")]),s._v("。")]),s._v(" "),a("p",[s._v("它包含了以下 "),a("strong",[s._v("转译插件")]),s._v("：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("@babel/plugin-syntax-jsx")])]),s._v(" "),a("li",[a("code",[s._v("@babel/plugin-transform-react-jsx")])]),s._v(" "),a("li",[a("code",[s._v("@babel/plugin-transform-react-display-name")])])]),s._v(" "),a("h3",{attrs:{id:"常用插件-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用插件-plugins"}},[s._v("#")]),s._v(" 常用插件（plugins）")]),s._v(" "),a("h4",{attrs:{id:"babel-polyfill"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-polyfill"}},[s._v("#")]),s._v(" @babel/polyfill")]),s._v(" "),a("p",[s._v("作用："),a("strong",[s._v("转译【新API】")]),s._v("。")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("polyfill")]),s._v("是垫片的意思。")])]),s._v(" "),a("p",[s._v("要使用"),a("code",[s._v("@babel/polyfill")]),s._v("，一般我们会赋予 "),a("code",[s._v("@babel/preset-env")]),s._v(" 配置项：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .babelrc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// 可配置项：false（默认） | "entry" | "usage"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// false：加载所有polyfill")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// "entry"：根据 “browserlist” 来加载需要的polyfill')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// "usage"：根据 “browserlist” + “实际代码需要” 来加载需要的polyfill（最终的打包文件里，每种polyfill的特性仅load一次）')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"useBuiltIns"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// <-- 新增")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"corejs"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// <-- 新增")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("前提是在 入口文件内 执行"),a("code",[s._v("import '@babel/polyfill'")])]),s._v(" "),a("blockquote",[a("p",[s._v("不要使用 "),a("code",[s._v("entry: ['@babel/polyfill', './src/index.js']")]),s._v(" 这种写法，属于 多主入口 方式。打包体积会比较大")])]),s._v(" "),a("p",[s._v("缺点："),a("strong",[s._v("污染全局作用域")])]),s._v(" "),a("blockquote",[a("p",[s._v("如：引入 Array.prototype.includes 修改了 Array 的原型，除此外还有 String...")])]),s._v(" "),a("h2",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000017929781",target:"_blank",rel:"noopener noreferrer"}},[s._v("babel preset env配置"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.im/post/5bfe541bf265da6179748834",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack - babel 篇"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://browserl.ist/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://browserl.ist/"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);