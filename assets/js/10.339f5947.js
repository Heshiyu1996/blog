(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{489:function(v,_,t){v.exports=t.p+"assets/img/img-5.84912317.png"},490:function(v,_,t){v.exports=t.p+"assets/img/img-1.ed05f712.png"},491:function(v,_,t){v.exports=t.p+"assets/img/img-2.baf1b9ec.png"},492:function(v,_,t){v.exports=t.p+"assets/img/img-3.8d54778e.png"},493:function(v,_,t){v.exports=t.p+"assets/img/img-13.2d041391.png"},494:function(v,_,t){v.exports=t.p+"assets/img/img-12.9d939314.png"},710:function(v,_,t){"use strict";t.r(_);var e=t(56),s=Object(e.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"bot-pc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bot-pc"}},[v._v("#")]),v._v(" Bot（PC）")]),v._v(" "),e("blockquote",[e("p",[v._v("项目时间：2018-09 ~ 2019-05")])]),v._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#bot-pc"}},[v._v("Bot（PC）")]),e("ul",[e("li",[e("a",{attrs:{href:"#职责"}},[v._v("职责")])]),e("li",[e("a",{attrs:{href:"#亮点"}},[v._v("亮点")])]),e("li",[e("a",{attrs:{href:"#难点"}},[v._v("难点")])])])])])]),e("p"),v._v(" "),e("p",[e("img",{attrs:{src:t(489),alt:"alt"}})]),v._v(" "),e("h2",{attrs:{id:"职责"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#职责"}},[v._v("#")]),v._v(" 职责")]),v._v(" "),e("ul",[e("li",[v._v("项目重构（Regular.js -> Vue.js）")]),v._v(" "),e("li",[v._v("基础组件库开发")]),v._v(" "),e("li",[v._v("调研/引入校验框架")]),v._v(" "),e("li",[v._v("引入登录功能、NOS上传封装")])]),v._v(" "),e("h2",{attrs:{id:"亮点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#亮点"}},[v._v("#")]),v._v(" 亮点")]),v._v(" "),e("ul",[e("li",[v._v("重components、轻pages（页面结构清晰）")]),v._v(" "),e("li",[v._v("组件库轻量")]),v._v(" "),e("li",[v._v("数据检验灵活")]),v._v(" "),e("li",[v._v("资源模块化")])]),v._v(" "),e("img",{attrs:{src:t(490),width:"300"}}),v._v(" "),e("img",{attrs:{src:t(491),width:"300"}}),v._v(" "),e("p",[e("img",{attrs:{src:t(492),alt:"alt"}})]),v._v(" "),e("h2",{attrs:{id:"难点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#难点"}},[v._v("#")]),v._v(" 难点")]),v._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E8%B0%83%E7%A0%94"}},[v._v("数据校验调研")])]),v._v(" "),e("li",[e("a",{attrs:{href:"#%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E5%BA%9E%E5%A4%A7%EF%BC%8C%E6%B8%B2%E6%9F%93%E5%8D%A1%E9%A1%BF%E4%BD%93%E9%AA%8C%E6%80%A7%E5%B7%AE"}},[v._v("列表数据庞大下，渲染卡顿体验性差")])]),v._v(" "),e("li",[e("a",{attrs:{href:"#%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E5%BA%9E%E5%A4%A7%EF%BC%8C%E6%9F%A5%E6%89%BE%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE"}},[v._v("列表数据庞大下，查找指定数据")])])]),v._v(" "),e("h3",{attrs:{id:"数据校验调研"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据校验调研"}},[v._v("#")]),v._v(" 数据校验调研")]),v._v(" "),e("p",[v._v("主要针对以下方面进行调研：")]),v._v(" "),e("ul",[e("li",[v._v("引入方式（全局/局部）")]),v._v(" "),e("li",[v._v("支持自定义校验规则")]),v._v(" "),e("li",[v._v("支持Promise")]),v._v(" "),e("li",[v._v("支持嵌套")])]),v._v(" "),e("img",{attrs:{src:t(493),width:"400px"}}),v._v(" "),e("img",{attrs:{src:t(494),width:"300px"}}),v._v(" "),e("p",[v._v("比较发现，"),e("code",[v._v("Vuelidate")]),v._v("相对比较轻量，支持局部引入，"),e("strong",[v._v("还支持嵌套校验、基于数据模型。")])]),v._v(" "),e("p",[e("strong",[v._v("Vuelidate")]),v._v("源码实现：")]),v._v(" "),e("ul",[e("li",[v._v("实例化vue时，会通过"),e("code",[v._v("this.$options")]),v._v("读取该 vue实例 选项的"),e("code",[v._v("validations")])]),v._v(" "),e("li",[v._v("会把选项里的"),e("code",[v._v("配置规则")]),v._v("转化为"),e("code",[v._v("$v")]),v._v("属性")]),v._v(" "),e("li",[v._v("将"),e("code",[v._v("$v")]),v._v("的代理通过"),e("code",[v._v("mixin")]),v._v("的方式，加入到 vue实例 的"),e("code",[v._v("computed")]),v._v("选项，进行双向绑定")])]),v._v(" "),e("h3",{attrs:{id:"列表数据庞大-渲染卡顿体验性差"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#列表数据庞大-渲染卡顿体验性差"}},[v._v("#")]),v._v(" 列表数据庞大，渲染卡顿体验性差")]),v._v(" "),e("p",[v._v("主要问题：列表数据庞大（10w），渲染卡顿体验性差。（分页不可取）时间分片")]),v._v(" "),e("p",[v._v("解决方案：")]),v._v(" "),e("ul",[e("li",[e("p",[e("strong",[v._v("方案一：一次性渲染")])]),v._v(" "),e("ul",[e("li",[v._v("现象：白屏时间长"),e("strong",[v._v("9s（白屏6s Script、3s Rendering）")])]),v._v(" "),e("li",[v._v("在"),e("code",[v._v("js执行完且渲染前")]),v._v("、"),e("code",[v._v("setTimeout内")]),v._v("分别输出"),e("code",[v._v("Date.now")]),v._v("，发现：JS执行并不是瓶颈，而是渲染阶段")]),v._v(" "),e("li",[v._v("方案不可用原因：白屏时间过长，体验性极差")])])]),v._v(" "),e("li",[e("p",[e("strong",[v._v("方案二：使用"),e("code",[v._v("setTimeout")]),v._v("分批渲染")])]),v._v(" "),e("ul",[e("li",[v._v("现象：白屏缓解，但会出现闪屏（白屏1.5s，0.5s Script、1s Rendering）")]),v._v(" "),e("li",[e("code",[v._v("FPS")]),v._v("表示每秒钟画面更新次数，大多数显示器刷新频率60Hz（即每秒钟重绘60次，FPS = 60 frame/s）")]),v._v(" "),e("li",[e("code",[v._v("帧率小于40 FPS")]),v._v("时，人会开始感觉卡顿")]),v._v(" "),e("li",[v._v("不可用原因：1、"),e("code",[v._v("setTimeout")]),v._v("执行时间不确定（由于主线程执行完才会去检查事件队列）；2、不同显示器FPS不同，但"),e("code",[v._v("setTimeout")]),v._v("设定固定间隔；3、可能出现丢帧")])])]),v._v(" "),e("li",[e("p",[e("strong",[v._v("方案三：使用"),e("code",[v._v("requestAnimationFrame")])])]),v._v(" "),e("ul",[e("li",[v._v("现象：白屏缓解，不会出现闪屏（白屏1.2s，0.2s Script、1s Rendering）")]),v._v(" "),e("li",[v._v("不会丢帧。保证回调函数 "),e("strong",[v._v("在屏幕每次更新的间隔里")]),v._v(" 只被执行一次")]),v._v(" "),e("li",[v._v("不兼容 "),e("strong",[v._v("IE10以下")])])])]),v._v(" "),e("li",[e("p",[e("strong",[v._v("方案四：使用"),e("code",[v._v("requestAnimationFrame")]),v._v("+"),e("code",[v._v("DoccumentFragment")])])]),v._v(" "),e("ul",[e("li",[v._v("现象：与 方案三 没有明显变化，但滑动更流畅")]),v._v(" "),e("li",[e("code",[v._v("DocumentFragment")]),v._v("内容变化不会触发DOM树重新渲染，不会导致性能问题")]),v._v(" "),e("li",[e("code",[v._v("document.createDocumentFragment")]),v._v("方法或者构造函数来创建一个空的DocumentFragment")])])]),v._v(" "),e("li",[e("p",[e("strong",[v._v("更优方案：使用"),e("code",[v._v("vue-virtual-scroller")])])]),v._v(" "),e("ul",[e("li",[v._v("现象：性能好")]),v._v(" "),e("li",[v._v("原理：将 "),e("strong",[v._v("加载事件")]),v._v(" 绑定在 "),e("code",[v._v("scroll事件")]),v._v(" 上，并记录上次渲染的"),e("code",[v._v("startIndex")]),v._v("、"),e("code",[v._v("endIndex")]),v._v("，利用一个buffer进行存储。局部渲染、自动回收DOM")]),v._v(" "),e("li",[v._v("缺点：需要设置固定的 父容器、子元素高度")])])])])])}),[],!1,null,null,null);_.default=s.exports}}]);