(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{532:function(t,v,_){t.exports=_.p+"assets/img/datadriven-6.95ffad2c.jpg"},533:function(t,v,_){t.exports=_.p+"assets/img/datadriven-1.02eb49a1.jpg"},534:function(t,v,_){t.exports=_.p+"assets/img/datadriven-2.c99cdb00.jpg"},535:function(t,v,_){t.exports=_.p+"assets/img/datadriven-3.e383cb28.jpg"},536:function(t,v,_){t.exports=_.p+"assets/img/datadriven-4.f935a490.jpg"},537:function(t,v,_){t.exports=_.p+"assets/img/datadriven-5.f1ad0d6b.jpg"},738:function(t,v,_){"use strict";_.r(v);var e=_(56),a=Object(e.a)({},(function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"数据驱动-data-driven"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据驱动-data-driven"}},[t._v("#")]),t._v(" 数据驱动（Data Driven）")]),t._v(" "),e("blockquote",[e("p",[t._v("Vue.js的核心思想：数据驱动")]),t._v(" "),e("p",[t._v("更新时间： 2019-04-04")])]),t._v(" "),e("p",[t._v("数据驱动有"),e("strong",[t._v("两部分")]),t._v("内容：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("模板（template）")]),t._v("和 "),e("code",[t._v("数据（data）")]),t._v("如何渲染成"),e("code",[t._v("最终的DOM")])]),t._v(" "),e("li",[e("code",[t._v("数据的变化")]),t._v("，驱动"),e("code",[t._v("视图的变化")]),t._v("（后面再介绍）")])]),t._v(" "),e("h2",{attrs:{id:"new-vue发生了什么-如何渲染最终的dom"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#new-vue发生了什么-如何渲染最终的dom"}},[t._v("#")]),t._v(" new Vue发生了什么（如何渲染最终的DOM）")]),t._v(" "),e("p",[e("img",{attrs:{src:_(532),alt:"alt"}})]),t._v(" "),e("h3",{attrs:{id:"initdata的大致思路"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#initdata的大致思路"}},[t._v("#")]),t._v(" initData的大致思路")]),t._v(" "),e("ul",[e("li",[t._v("用两个变量（"),e("code",[t._v("临时变量data")]),t._v("、"),e("code",[t._v("vm._data")]),t._v("）来存储"),e("code",[t._v("data函数")]),t._v("返回的对象。\n"),e("ul",[e("li",[e("code",[t._v("getData")]),t._v("作用是，若"),e("code",[t._v("data是Function")]),t._v("，就返回data函数返回的那个对象")]),t._v(" "),e("li",[e("code",[t._v("vm._data")]),t._v("主要是代理时用到")])])]),t._v(" "),e("li",[t._v("先拿到data里的"),e("code",[t._v("key")]),t._v("，再拿到props、methods拿到"),e("code",[t._v("key")]),t._v("。要保证让他们不能冲突（因为最终都会挂载到"),e("code",[t._v("vm")]),t._v("这个实例上，通过"),e("code",[t._v("this")]),t._v("可以访问到）")]),t._v(" "),e("li",[t._v("再对那些"),e("code",[t._v("不冲突data里的属性")]),t._v("调用："),e("code",[t._v("proxy(vm, '_data', key)")])]),t._v(" "),e("li",[t._v("在"),e("code",[t._v("proxy")]),t._v("里，通过"),e("code",[t._v("defineProperty")]),t._v("，对"),e("code",[t._v("vm")]),t._v("这个对象"),e("code",[t._v("新增一个key属性")]),t._v("，并将它的"),e("code",[t._v("属性描述")]),t._v("里的getter、setter指向"),e("code",[t._v("this[sourceKey][key]")]),t._v("里的getter、setter。这样做是为了使得访问"),e("code",[t._v("this.name")]),t._v("可以拿到"),e("code",[t._v("this._data.name")]),t._v("，也就是"),e("code",[t._v("this.$options.data")])])]),t._v(" "),e("h2",{attrs:{id:"vue实例挂载的实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue实例挂载的实现"}},[t._v("#")]),t._v(" Vue实例挂载的实现")]),t._v(" "),e("h3",{attrs:{id:"挂载前说一下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#挂载前说一下"}},[t._v("#")]),t._v(" 挂载前说一下")]),t._v(" "),e("p",[t._v("在"),e("code",[t._v("/public/index.html")]),t._v("下，会有个"),e("code",[t._v('<div id="app"></div>')]),t._v("这个dom节点。那么这个节点就是 "),e("strong",[t._v("下面要展开一系列挂载过程")]),t._v(" 的一个挂载点。")]),t._v(" "),e("p",[t._v("细心发现，"),e("code",[t._v("app.vue")]),t._v("里面也有一个"),e("code",[t._v('<div id="app"></div>')]),t._v("。实际上组件里的这个"),e("code",[t._v('id="app"')]),t._v("，"),e("code",[t._v("app")]),t._v("也可以换成其他的，也不影响使用。它是起到 "),e("strong",[t._v("障眼法（即看起来和挂载前的DOM节点一样）")]),t._v(" 的作用")]),t._v(" "),e("h3",{attrs:{id:"首先是-mount方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#首先是-mount方法"}},[t._v("#")]),t._v(" 首先是$mount方法")]),t._v(" "),e("p",[e("code",[t._v("vm.$mount")]),t._v("挂载的目标，就是把 "),e("strong",[t._v("模板")]),t._v(" 渲染成 "),e("strong",[t._v("最终的DOM")]),t._v("。")]),t._v(" "),e("p",[t._v("【前情提要】"),e("code",[t._v("compoler")]),t._v("版本的"),e("code",[t._v("$mount")]),t._v("会先缓存原型上的"),e("code",[t._v("$mount")]),t._v("，最后调用"),e("code",[t._v("mount.call(this, el)")]),t._v("。只是中间加入了一些判断，使得"),e("code",[t._v("el")]),t._v("或者"),e("code",[t._v("template")]),t._v("都能符合规范地转成"),e("code",[t._v("render")]),t._v("方法（通过“在线编译”——"),e("code",[t._v("compileToFunctions方法")]),t._v("）")]),t._v(" "),e("p",[e("img",{attrs:{src:_(533),alt:"alt"}})]),t._v(" "),e("p",[e("img",{attrs:{src:_(534),alt:"alt"}})]),t._v(" "),e("p",[e("img",{attrs:{src:_(535),alt:"alt"}})]),t._v(" "),e("p",[e("img",{attrs:{src:_(536),alt:"alt"}})]),t._v(" "),e("p",[t._v("附草稿：")]),t._v(" "),e("p",[e("img",{attrs:{src:_(537),alt:"alt"}})])])}),[],!1,null,null,null);v.default=a.exports}}]);