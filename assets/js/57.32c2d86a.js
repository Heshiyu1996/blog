(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{403:function(t,s,a){t.exports=a.p+"assets/img/git-branch.98d5a5da.jpg"},602:function(t,s,a){"use strict";a.r(s);var n=a(43),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"git规范"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git规范"}},[t._v("#")]),t._v(" Git规范")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#git规范"}},[t._v("Git规范")]),n("ul",[n("li",[n("a",{attrs:{href:"#git分支命名"}},[t._v("Git分支命名")])]),n("li",[n("a",{attrs:{href:"#git分支的commit格式"}},[t._v("Git分支的Commit格式")])]),n("li",[n("a",{attrs:{href:"#commit校验工具-husky"}},[t._v("Commit校验工具——husky")])]),n("li",[n("a",{attrs:{href:"#参考链接"}},[t._v("参考链接")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"git分支命名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git分支命名"}},[t._v("#")]),t._v(" Git分支命名")]),t._v(" "),n("ul",[n("li",[n("p",[n("strong",[t._v("master：主分支")])]),t._v(" "),n("ul",[n("li",[t._v("负责记录线上版本的迭代")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("develop：开发分支")])]),t._v(" "),n("ul",[n("li",[t._v("负责目前最新开发进度的版本")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("feature/*：功能分支（"),n("em",[t._v("“*”代表的是功能的简称")]),t._v("）")])]),t._v(" "),n("ul",[n("li",[t._v("用于开发新的功能")]),t._v(" "),n("li",[t._v("基于"),n("code",[t._v("develop分支")]),t._v("检出")]),t._v(" "),n("li",[t._v("局部开发完成并自测通过后，需要合并到"),n("code",[t._v("develop分支")]),t._v("，随后删除")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("release：提测分支")])]),t._v(" "),n("ul",[n("li",[t._v("用于代码上线准备，创建后由QA部署到测试环境进行测试")]),t._v(" "),n("li",[t._v("基于"),n("code",[t._v("develop分支")]),t._v("检出")]),t._v(" "),n("li",[t._v("提测过程中，发现bug，则在"),n("code",[t._v("release分支")]),t._v("进行修复；")]),t._v(" "),n("li",[t._v("上线前，需将"),n("code",[t._v("release分支")]),t._v("合并到"),n("code",[t._v("master")]),t._v("、"),n("code",[t._v("develop分支")])])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("hotfix：紧急修复分支")])]),t._v(" "),n("ul",[n("li",[t._v("用于线上bug的修复")]),t._v(" "),n("li",[t._v("基于"),n("code",[t._v("master分支")]),t._v("检出")]),t._v(" "),n("li",[t._v("修复完后，合并到"),n("code",[t._v("master")]),t._v("、"),n("code",[t._v("develop分支")])])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("refactor：代码优化分支")])]),t._v(" "),n("ul",[n("li",[t._v("用于代码的优化（一般在提测之后），优化在开发阶段产生的冗余或不完善的代码")]),t._v(" "),n("li",[t._v("基于"),n("code",[t._v("release分支")]),t._v("检出")]),t._v(" "),n("li",[t._v("优化完后，合并到"),n("code",[t._v("release分支")])])])])]),t._v(" "),n("h2",{attrs:{id:"git分支的commit格式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git分支的commit格式"}},[t._v("#")]),t._v(" Git分支的Commit格式")]),t._v(" "),n("p",[t._v("格式："),n("code",[t._v("type: message")])]),t._v(" "),n("h3",{attrs:{id:"type-提交类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#type-提交类型"}},[t._v("#")]),t._v(" type（提交类型）")]),t._v(" "),n("ul",[n("li",[t._v("feature: 新特性")]),t._v(" "),n("li",[t._v("refactor: 代码重构 && 优化")]),t._v(" "),n("li",[t._v("style: 样式修改")]),t._v(" "),n("li",[t._v("fix: bug修复（提测阶段 && 紧急线上）")]),t._v(" "),n("li",[t._v("docs: 文档修改（文案修改 && 文件更新）")])]),t._v(" "),n("h3",{attrs:{id:"message-提交描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#message-提交描述"}},[t._v("#")]),t._v(" message（提交描述）")]),t._v(" "),n("p",[t._v("对应内容是commit简短描述：大致修改内容、影响文件/范围、进度等。")]),t._v(" "),n("blockquote",[n("p",[t._v("英文中文皆可，一般不超过50个字符")])]),t._v(" "),n("h3",{attrs:{id:"部分统一描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部分统一描述"}},[t._v("#")]),t._v(" 部分统一描述")]),t._v(" "),n("ul",[n("li",[t._v("文件打包："),n("code",[t._v("npm run build")])]),t._v(" "),n("li",[t._v("代码格式化："),n("code",[t._v("npm run format")])])]),t._v(" "),n("h3",{attrs:{id:"git分支图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git分支图"}},[t._v("#")]),t._v(" Git分支图")]),t._v(" "),n("p",[n("img",{attrs:{src:a(403),alt:"alt"}})]),t._v(" "),n("h2",{attrs:{id:"commit校验工具-husky"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit校验工具-husky"}},[t._v("#")]),t._v(" Commit校验工具——husky")]),t._v(" "),n("p",[t._v("原理：在"),n("code",[t._v("git commit")]),t._v("提交代码前，利用Git钩子（"),n("code",[t._v("pre-commit")]),t._v("、"),n("code",[t._v("commit-msg")]),t._v("）来实现代码规范检测、提交信息检测。")]),t._v(" "),n("h3",{attrs:{id:"安装husky-lint-staged"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装husky-lint-staged"}},[t._v("#")]),t._v(" 安装husky & lint-staged")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("yarn add husky lint-staged -D\n")])])]),n("p",[n("code",[t._v("lint-staged")]),t._v("可以仅仅过滤出Git代码暂存区中"),n("strong",[t._v("符合的文件")]),t._v("（即本次被committed的文件）。")]),t._v(" "),n("blockquote",[n("p",[t._v("虽然如Eslint之类的也有文件过滤配置，但毕竟还是对于匹配文件的全量遍历，如全量的.js文件，基本达不到性能要求，有时还会误格式化其他同学的代码，因此我们引入Lint-staged。")])]),t._v(" "),n("h3",{attrs:{id:"在新建脚本verify-commit-msg-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在新建脚本verify-commit-msg-js"}},[t._v("#")]),t._v(" 在新建脚本"),n("code",[t._v("verify-commit-msg.js")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" chalk "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chalk'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msgPath "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HUSKY_GIT_PARAMS")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" msg "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msgPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" commitRE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^(((feature|fix|docs|style|refactor|jira)?: .{1,50})|npm run format|merge|build)")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("commitRE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("  ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bgRed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("white")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("' ERROR '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("red")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("commit信息格式不正确，请遵循“前端Git规范”")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\n\\n")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("red")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("  Examples: <type>: <message>\\n\\n")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("    ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("green")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("feature: add component Header")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\n")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("    ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("green")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("（以及：")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cyan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("npm run format")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("、")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cyan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("merge")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("、")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cyan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("build")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("）")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\n\\n")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br")])]),n("p",[t._v("这样就可以自由定制信息。")]),t._v(" "),n("blockquote",[n("p",[t._v("也可以用已有的包"),n("a",{attrs:{href:"https://github.com/conventional-changelog/commitlint",target:"_blank",rel:"noopener noreferrer"}},[t._v("commitlint"),n("OutboundLink")],1),t._v("进行校验。")])]),t._v(" "),n("h3",{attrs:{id:"package-json配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json配置"}},[t._v("#")]),t._v(" package.json配置")]),t._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"format"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prettier --write \\"./src/**/*.{js,jsx,json}\\""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint --fix --ext .js,.jsx src"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitHooks"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-commit"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lint-staged"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit-msg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/verify-commit-msg.ts"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"packages/**/*.{js,jsx,ts,tsx}"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run format"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run lint"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git add ."')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("p",[t._v("此处"),n("code",[t._v("lint-staged")]),t._v("的用处：对本次被committed的所有"),n("code",[t._v("packages")]),t._v("下的所有子孙目录的"),n("code",[t._v("js、jsx、ts、tsx")]),t._v("文件，执行"),n("code",[t._v("npm run format")]),t._v("、"),n("code",[t._v("npm run lint")]),t._v("、"),n("code",[t._v("git add .")]),t._v("命令。")]),t._v(" "),n("p",[t._v("其中，")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("pre-commit")]),t._v("此阶段可指定某些操作（如：代码检查）")])]),t._v(" "),n("blockquote",[n("p",[t._v("执行时机：输入"),n("code",[t._v('git commit -m "xxx"')]),t._v("后、"),n("code",[t._v("commit-msg")]),t._v("前")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("commit-msg")]),t._v("此阶段可以“检查commit提交信息”")])]),t._v(" "),n("blockquote",[n("p",[t._v("执行时机：commit生效前")])]),t._v(" "),n("p",[t._v("以上配置后，如果代码检测不通过，或者不符合"),n("code",[t._v("<type>: <subject>")]),t._v("规则，Git 将放弃此次提交。")]),t._v(" "),n("h3",{attrs:{id:"使用注意"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用注意"}},[t._v("#")]),t._v(" 使用注意")]),t._v(" "),n("p",[t._v("1、由于使用了"),n("code",[t._v("git add .")]),t._v("，会将"),n("code",[t._v("待定区")]),t._v("文件全部提交 "),n("em",[t._v("（尽量保证每次的“小功能提交”）")]),t._v("；")]),t._v(" "),n("p",[t._v("2、即使被husky退回提交，也会代码格式化、语法检查/修正；")]),t._v(" "),n("p",[t._v("3、ESLint的"),n("code",[t._v("warning")]),t._v("不会被Husky拦截 "),n("em",[t._v("（ESLint rules尽量配置成error）")]),t._v("；")]),t._v(" "),n("p",[t._v("4、跳过检测，强制提交（不推荐）")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v('git add . && git commit --no-verify -m "force commit"\n')])])]),n("h2",{attrs:{id:"参考链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000017790711?utm_source=tag-newest",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端代码风格自动化系列（三）之Lint-staged"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.jianshu.com/p/856bbb5ed9ec",target:"_blank",rel:"noopener noreferrer"}},[t._v("git commit 规范"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);