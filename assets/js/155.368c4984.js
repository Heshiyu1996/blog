(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{703:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),a("h2",{attrs:{id:"异步式i-o和事件驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步式i-o和事件驱动"}},[s._v("#")]),s._v(" 异步式I/O和事件驱动")]),s._v(" "),a("p",[s._v("Node.js 是一种 基于JavaScript 的、支持多进程 的后端语言。")]),s._v(" "),a("p",[s._v("在JS执行方面，它采用了"),a("code",[s._v("单进程单线程")]),s._v("、"),a("code",[s._v("异步式I/O")]),s._v("、"),a("code",[s._v("事件驱动")]),s._v("的程序设计模型")]),s._v(" "),a("blockquote",[a("p",[s._v("实现了："),a("code",[s._v("包和模块")]),s._v("、"),a("code",[s._v("文件系统")]),s._v("、"),a("code",[s._v("网络通信")]),s._v("、"),a("code",[s._v("操作系统API")]),s._v("等功能，它是非阻塞的。")])]),s._v(" "),a("h3",{attrs:{id:"异步式i-o"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异步式i-o"}},[s._v("#")]),s._v(" 异步式I/O")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("线程1")]),s._v(" 将 "),a("strong",[s._v("I/O操作")]),s._v(" 发送给 "),a("code",[s._v("操作系统")]),s._v("，继续执行后面的语句；")]),s._v(" "),a("li",[s._v("执行完后，会马上进入 "),a("strong",[s._v("事件循环")]),s._v("（不断地检查 "),a("strong",[s._v("事件队列")]),s._v(" 有没有未处理的事件）")]),s._v(" "),a("li",[s._v("当操作系统完成 "),a("strong",[s._v("I/O操作")]),s._v(" 时，以 "),a("strong",[s._v("事件")]),s._v(" 的形式发送到 "),a("strong",[s._v("事件队列")])]),s._v(" "),a("li",[a("code",[s._v("线程1")]),s._v(" 在 "),a("strong",[s._v("事件循环")]),s._v(" 中，检查到 "),a("strong",[s._v("事件队列")]),s._v(" 存在未处理的事件；"),a("strong",[s._v("事件循环")]),s._v(" 会 "),a("strong",[s._v("主动调用回调函数")]),s._v(" 来完成后续工作")])]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"/skill/js/event-loop"}},[s._v("node事件循环")])])]),s._v(" "),a("h3",{attrs:{id:"事件驱动events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件驱动events"}},[s._v("#")]),s._v(" 事件驱动events")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("events")]),s._v("模块提供了唯一的接口，它几乎被所有的模块依赖。\n"),a("code",[s._v("events")]),s._v("模块只提供一个对象："),a("code",[s._v("events.EventEmitter")]),s._v("，其核心就是 "),a("strong",[s._v("事件发射")]),s._v(" 和 "),a("strong",[s._v("事件监听")]),s._v(" 功能的封装。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" events "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'events'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" emitter "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("events"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("EventEmitter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nemitter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'someEvent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nemitter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'someEvent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"require的过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require的过程"}},[s._v("#")]),s._v(" require的过程")]),s._v(" "),a("p",[a("code",[s._v("require")]),s._v("命令的基本功能是，读取并执行一个指定的文件，然后返回 "),a("strong",[s._v("该模块")]),s._v(" 的"),a("code",[s._v("exports")]),s._v("对象。")]),s._v(" "),a("p",[s._v("他的加载规则：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("加载目录")]),s._v(" "),a("ul",[a("li",[s._v("找到目录下"),a("code",[s._v("package.json")]),s._v("的"),a("code",[s._v("main")]),s._v("字段")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"some-dir"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./lib/some-lib.js"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("找不到"),a("code",[s._v("package.json")]),s._v("，会找"),a("code",[s._v("index.js")]),s._v("、"),a("code",[s._v("index.node")])])])]),s._v(" "),a("li",[a("p",[s._v("加载文件（最初是以"),a("code",[s._v(".js")]),s._v("为后缀）")]),s._v(" "),a("ul",[a("li",[s._v("以"),a("code",[s._v("/")]),s._v("开头，则按绝对路径去加载该模块")]),s._v(" "),a("li",[s._v("以"),a("code",[s._v("./")]),s._v("开头，则按相对该脚本的路径去加载该模块")]),s._v(" "),a("li",[s._v("没有开头\n"),a("ul",[a("li",[s._v("按加载"),a("code",[s._v("核心模块")]),s._v("的方式去加载该模块")]),s._v(" "),a("li",[s._v("找不到，再按"),a("code",[s._v("第三方模块")]),s._v("的方式去加载该模块\n"),a("ul",[a("li",[s._v("例如"),a("code",[s._v("require('foo.js')")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 按`核心模块`的方式去加载")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 按`第三方模块`的方式去加载(最近一个node_modules)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("projects"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node_modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 按`第三方模块`的方式去加载(最近第二个node_modules)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node_modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 按`第三方模块`的方式去加载(最近第三个node_modules)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node_modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 按`第三方模块`的方式去加载(最近第四个node_modules)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node_modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])])])])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);